/*!
 * Parse JavaScript SDK
 * Version: 1.5.0
 * Built: Fri Jul 10 2015 17:05:46
 * http://parse.com
 *
 * Copyright 2015 Parse, LLC
 *
 * Includes: Underscore.js
 * Copyright 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
 * Released under the MIT license.
 */
!function(n){n.Parse=n.Parse||{},n.Parse.VERSION="js1.5.0"}(this)(function(){function n(n){function e(e,t,r,i,o,u){for(;o>=0&&o<u;o+=n){var a=i?i[o]:o;r=t(r,e[a],a,e)}return r}return function(t,r,i,o){r=m(r,o,4);var u=!I(t)&&g.keys(t),a=(u||t).length,s=n>0?0:a-1;return arguments.length<3&&(i=t[u?u[s]:s],s+=n),e(t,r,i,u,s,a)}}function e(n){return function(e,t,r){t=b(t,r);for(var i=S(e),o=n>0?0:i-1;o>=0&&o<i;o+=n)if(t(e[o],o,e))return o;return-1}}function t(n,e,t){return function(r,i,o){var u=0,a=S(r);if("number"==typeof o)n>0?u=o>=0?o:Math.max(o+a,u):a=o>=0?Math.min(o+1,a):o+a+1;else if(t&&o&&a)return o=t(r,i),r[o]===i?o:-1;if(i!==i)return o=e(f.call(r,u,a),g.isNaN),o>=0?o+u:-1;for(o=n>0?u:a-1;o>=0&&o<a;o+=n)if(r[o]===i)return o;return-1}}function r(n,e){var t=P.length,r=n.constructor,i=g.isFunction(r)&&r.prototype||a,o="constructor";for(g.has(n,o)&&!g.contains(e,o)&&e.push(o);t--;)o=P[t],o in n&&n[o]!==i[o]&&!g.contains(e,o)&&e.push(o)}var i=this,o=i._,u=Array.prototype,a=Object.prototype,s=Function.prototype,c=u.push,f=u.slice,l=a.toString,p=a.hasOwnProperty,h=Array.isArray,d=Object.keys,v=s.bind,y=Object.create,_=function(){},g=function(n){return n instanceof g?n:this instanceof g?void(this._wrapped=n):new g(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=g),exports._=g):i._=g,g.VERSION="1.8.3";var m=function(n,e,t){if(void 0===e)return n;switch(null==t?3:t){case 1:return function(t){return n.call(e,t)};case 2:return function(t,r){return n.call(e,t,r)};case 3:return function(t,r,i){return n.call(e,t,r,i)};case 4:return function(t,r,i,o){return n.call(e,t,r,i,o)}}return function(){return n.apply(e,arguments)}},b=function(n,e,t){return null==n?g.identity:g.isFunction(n)?m(n,e,t):g.isObject(n)?g.matcher(n):g.property(n)};g.iteratee=function(n,e){return b(n,e,1/0)};var w=function(n,e){return function(t){var r=arguments.length;if(r<2||null==t)return t;for(var i=1;i<r;i++)for(var o=arguments[i],u=n(o),a=u.length,s=0;s<a;s++){var c=u[s];e&&void 0!==t[c]||(t[c]=o[c])}return t}},j=function(n){if(!g.isObject(n))return{};if(y)return y(n);_.prototype=n;var e=new _;return _.prototype=null,e},x=function(n){return function(e){return null==e?void 0:e[n]}},O=Math.pow(2,53)-1,S=x("length"),I=function(n){var e=S(n);return"number"==typeof e&&e>=0&&e<=O};g.each=g.forEach=function(n,e,t){e=m(e,t);var r,i;if(I(n))for(r=0,i=n.length;r<i;r++)e(n[r],r,n);else{var o=g.keys(n);for(r=0,i=o.length;r<i;r++)e(n[o[r]],o[r],n)}return n},g.map=g.collect=function(n,e,t){e=b(e,t);for(var r=!I(n)&&g.keys(n),i=(r||n).length,o=Array(i),u=0;u<i;u++){var a=r?r[u]:u;o[u]=e(n[a],a,n)}return o},g.reduce=g.foldl=g.inject=n(1),g.reduceRight=g.foldr=n(-1),g.find=g.detect=function(n,e,t){var r;if(r=I(n)?g.findIndex(n,e,t):g.findKey(n,e,t),void 0!==r&&r!==-1)return n[r]},g.filter=g.select=function(n,e,t){var r=[];return e=b(e,t),g.each(n,function(n,t,i){e(n,t,i)&&r.push(n)}),r},g.reject=function(n,e,t){return g.filter(n,g.negate(b(e)),t)},g.every=g.all=function(n,e,t){e=b(e,t);for(var r=!I(n)&&g.keys(n),i=(r||n).length,o=0;o<i;o++){var u=r?r[o]:o;if(!e(n[u],u,n))return!1}return!0},g.some=g.any=function(n,e,t){e=b(e,t);for(var r=!I(n)&&g.keys(n),i=(r||n).length,o=0;o<i;o++){var u=r?r[o]:o;if(e(n[u],u,n))return!0}return!1},g.contains=g.includes=g.include=function(n,e,t,r){return I(n)||(n=g.values(n)),("number"!=typeof t||r)&&(t=0),g.indexOf(n,e,t)>=0},g.invoke=function(n,e){var t=f.call(arguments,2),r=g.isFunction(e);return g.map(n,function(n){var i=r?e:n[e];return null==i?i:i.apply(n,t)})},g.pluck=function(n,e){return g.map(n,g.property(e))},g.where=function(n,e){return g.filter(n,g.matcher(e))},g.findWhere=function(n,e){return g.find(n,g.matcher(e))},g.max=function(n,e,t){var r,i,o=-(1/0),u=-(1/0);if(null==e&&null!=n){n=I(n)?n:g.values(n);for(var a=0,s=n.length;a<s;a++)r=n[a],r>o&&(o=r)}else e=b(e,t),g.each(n,function(n,t,r){i=e(n,t,r),(i>u||i===-(1/0)&&o===-(1/0))&&(o=n,u=i)});return o},g.min=function(n,e,t){var r,i,o=1/0,u=1/0;if(null==e&&null!=n){n=I(n)?n:g.values(n);for(var a=0,s=n.length;a<s;a++)r=n[a],r<o&&(o=r)}else e=b(e,t),g.each(n,function(n,t,r){i=e(n,t,r),(i<u||i===1/0&&o===1/0)&&(o=n,u=i)});return o},g.shuffle=function(n){for(var e,t=I(n)?n:g.values(n),r=t.length,i=Array(r),o=0;o<r;o++)e=g.random(0,o),e!==o&&(i[o]=i[e]),i[e]=t[o];return i},g.sample=function(n,e,t){return null==e||t?(I(n)||(n=g.values(n)),n[g.random(n.length-1)]):g.shuffle(n).slice(0,Math.max(0,e))},g.sortBy=function(n,e,t){return e=b(e,t),g.pluck(g.map(n,function(n,t,r){return{value:n,index:t,criteria:e(n,t,r)}}).sort(function(n,e){var t=n.criteria,r=e.criteria;if(t!==r){if(t>r||void 0===t)return 1;if(t<r||void 0===r)return-1}return n.index-e.index}),"value")};var N=function(n){return function(e,t,r){var i={};return t=b(t,r),g.each(e,function(r,o){var u=t(r,o,e);n(i,r,u)}),i}};g.groupBy=N(function(n,e,t){g.has(n,t)?n[t].push(e):n[t]=[e]}),g.indexBy=N(function(n,e,t){n[t]=e}),g.countBy=N(function(n,e,t){g.has(n,t)?n[t]++:n[t]=1}),g.toArray=function(n){return n?g.isArray(n)?f.call(n):I(n)?g.map(n,g.identity):g.values(n):[]},g.size=function(n){return null==n?0:I(n)?n.length:g.keys(n).length},g.partition=function(n,e,t){e=b(e,t);var r=[],i=[];return g.each(n,function(n,t,o){(e(n,t,o)?r:i).push(n)}),[r,i]},g.first=g.head=g.take=function(n,e,t){if(null!=n)return null==e||t?n[0]:g.initial(n,n.length-e)},g.initial=function(n,e,t){return f.call(n,0,Math.max(0,n.length-(null==e||t?1:e)))},g.last=function(n,e,t){if(null!=n)return null==e||t?n[n.length-1]:g.rest(n,Math.max(0,n.length-e))},g.rest=g.tail=g.drop=function(n,e,t){return f.call(n,null==e||t?1:e)},g.compact=function(n){return g.filter(n,g.identity)};var E=function(n,e,t,r){for(var i=[],o=0,u=r||0,a=S(n);u<a;u++){var s=n[u];if(I(s)&&(g.isArray(s)||g.isArguments(s))){e||(s=E(s,e,t));var c=0,f=s.length;for(i.length+=f;c<f;)i[o++]=s[c++]}else t||(i[o++]=s)}return i};g.flatten=function(n,e){return E(n,e,!1)},g.without=function(n){return g.difference(n,f.call(arguments,1))},g.uniq=g.unique=function(n,e,t,r){g.isBoolean(e)||(r=t,t=e,e=!1),null!=t&&(t=b(t,r));for(var i=[],o=[],u=0,a=S(n);u<a;u++){var s=n[u],c=t?t(s,u,n):s;e?(u&&o===c||i.push(s),o=c):t?g.contains(o,c)||(o.push(c),i.push(s)):g.contains(i,s)||i.push(s)}return i},g.union=function(){return g.uniq(E(arguments,!0,!0))},g.intersection=function(n){for(var e=[],t=arguments.length,r=0,i=S(n);r<i;r++){var o=n[r];if(!g.contains(e,o)){for(var u=1;u<t&&g.contains(arguments[u],o);u++);u===t&&e.push(o)}}return e},g.difference=function(n){var e=E(arguments,!0,!0,1);return g.filter(n,function(n){return!g.contains(e,n)})},g.zip=function(){return g.unzip(arguments)},g.unzip=function(n){for(var e=n&&g.max(n,S).length||0,t=Array(e),r=0;r<e;r++)t[r]=g.pluck(n,r);return t},g.object=function(n,e){for(var t={},r=0,i=S(n);r<i;r++)e?t[n[r]]=e[r]:t[n[r][0]]=n[r][1];return t},g.findIndex=e(1),g.findLastIndex=e(-1),g.sortedIndex=function(n,e,t,r){t=b(t,r,1);for(var i=t(e),o=0,u=S(n);o<u;){var a=Math.floor((o+u)/2);t(n[a])<i?o=a+1:u=a}return o},g.indexOf=t(1,g.findIndex,g.sortedIndex),g.lastIndexOf=t(-1,g.findLastIndex),g.range=function(n,e,t){null==e&&(e=n||0,n=0),t=t||1;for(var r=Math.max(Math.ceil((e-n)/t),0),i=Array(r),o=0;o<r;o++,n+=t)i[o]=n;return i};var A=function(n,e,t,r,i){if(!(r instanceof e))return n.apply(t,i);var o=j(n.prototype),u=n.apply(o,i);return g.isObject(u)?u:o};g.bind=function(n,e){if(v&&n.bind===v)return v.apply(n,f.call(arguments,1));if(!g.isFunction(n))throw new TypeError("Bind must be called on a function");var t=f.call(arguments,2),r=function(){return A(n,r,e,this,t.concat(f.call(arguments)))};return r},g.partial=function(n){var e=f.call(arguments,1),t=function(){for(var r=0,i=e.length,o=Array(i),u=0;u<i;u++)o[u]=e[u]===g?arguments[r++]:e[u];for(;r<arguments.length;)o.push(arguments[r++]);return A(n,t,this,this,o)};return t},g.bindAll=function(n){var e,t,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(e=1;e<r;e++)t=arguments[e],n[t]=g.bind(n[t],n);return n},g.memoize=function(n,e){var t=function(r){var i=t.cache,o=""+(e?e.apply(this,arguments):r);return g.has(i,o)||(i[o]=n.apply(this,arguments)),i[o]};return t.cache={},t},g.delay=function(n,e){var t=f.call(arguments,2);return setTimeout(function(){return n.apply(null,t)},e)},g.defer=g.partial(g.delay,g,1),g.throttle=function(n,e,t){var r,i,o,u=null,a=0;t||(t={});var s=function(){a=t.leading===!1?0:g.now(),u=null,o=n.apply(r,i),u||(r=i=null)};return function(){var c=g.now();a||t.leading!==!1||(a=c);var f=e-(c-a);return r=this,i=arguments,f<=0||f>e?(u&&(clearTimeout(u),u=null),a=c,o=n.apply(r,i),u||(r=i=null)):u||t.trailing===!1||(u=setTimeout(s,f)),o}},g.debounce=function(n,e,t){var r,i,o,u,a,s=function(){var c=g.now()-u;c<e&&c>=0?r=setTimeout(s,e-c):(r=null,t||(a=n.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,u=g.now();var c=t&&!r;return r||(r=setTimeout(s,e)),c&&(a=n.apply(o,i),o=i=null),a}},g.wrap=function(n,e){return g.partial(e,n)},g.negate=function(n){return function(){return!n.apply(this,arguments)}},g.compose=function(){var n=arguments,e=n.length-1;return function(){for(var t=e,r=n[e].apply(this,arguments);t--;)r=n[t].call(this,r);return r}},g.after=function(n,e){return function(){if(--n<1)return e.apply(this,arguments)}},g.before=function(n,e){var t;return function(){return--n>0&&(t=e.apply(this,arguments)),n<=1&&(e=null),t}},g.once=g.partial(g.before,2);var R=!{toString:null}.propertyIsEnumerable("toString"),P=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];g.keys=function(n){if(!g.isObject(n))return[];if(d)return d(n);var e=[];for(var t in n)g.has(n,t)&&e.push(t);return R&&r(n,e),e},g.allKeys=function(n){if(!g.isObject(n))return[];var e=[];for(var t in n)e.push(t);return R&&r(n,e),e},g.values=function(n){for(var e=g.keys(n),t=e.length,r=Array(t),i=0;i<t;i++)r[i]=n[e[i]];return r},g.mapObject=function(n,e,t){e=b(e,t);for(var r,i=g.keys(n),o=i.length,u={},a=0;a<o;a++)r=i[a],u[r]=e(n[r],r,n);return u},g.pairs=function(n){for(var e=g.keys(n),t=e.length,r=Array(t),i=0;i<t;i++)r[i]=[e[i],n[e[i]]];return r},g.invert=function(n){for(var e={},t=g.keys(n),r=0,i=t.length;r<i;r++)e[n[t[r]]]=t[r];return e},g.functions=g.methods=function(n){var e=[];for(var t in n)g.isFunction(n[t])&&e.push(t);return e.sort()},g.extend=w(g.allKeys),g.extendOwn=g.assign=w(g.keys),g.findKey=function(n,e,t){e=b(e,t);for(var r,i=g.keys(n),o=0,u=i.length;o<u;o++)if(r=i[o],e(n[r],r,n))return r},g.pick=function(n,e,t){var r,i,o={},u=n;if(null==u)return o;g.isFunction(e)?(i=g.allKeys(u),r=m(e,t)):(i=E(arguments,!1,!1,1),r=function(n,e,t){return e in t},u=Object(u));for(var a=0,s=i.length;a<s;a++){var c=i[a],f=u[c];r(f,c,u)&&(o[c]=f)}return o},g.omit=function(n,e,t){if(g.isFunction(e))e=g.negate(e);else{var r=g.map(E(arguments,!1,!1,1),String);e=function(n,e){return!g.contains(r,e)}}return g.pick(n,e,t)},g.defaults=w(g.allKeys,!0),g.create=function(n,e){var t=j(n);return e&&g.extendOwn(t,e),t},g.clone=function(n){return g.isObject(n)?g.isArray(n)?n.slice():g.extend({},n):n},g.tap=function(n,e){return e(n),n},g.isMatch=function(n,e){var t=g.keys(e),r=t.length;if(null==n)return!r;for(var i=Object(n),o=0;o<r;o++){var u=t[o];if(e[u]!==i[u]||!(u in i))return!1}return!0};var M=function(n,e,t,r){if(n===e)return 0!==n||1/n===1/e;if(null==n||null==e)return n===e;n instanceof g&&(n=n._wrapped),e instanceof g&&(e=e._wrapped);var i=l.call(n);if(i!==l.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+n==""+e;case"[object Number]":return+n!==+n?+e!==+e:0===+n?1/+n===1/e:+n===+e;case"[object Date]":case"[object Boolean]":return+n===+e}var o="[object Array]"===i;if(!o){if("object"!=typeof n||"object"!=typeof e)return!1;var u=n.constructor,a=e.constructor;if(u!==a&&!(g.isFunction(u)&&u instanceof u&&g.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in e)return!1}t=t||[],r=r||[];for(var s=t.length;s--;)if(t[s]===n)return r[s]===e;if(t.push(n),r.push(e),o){if(s=n.length,s!==e.length)return!1;for(;s--;)if(!M(n[s],e[s],t,r))return!1}else{var c,f=g.keys(n);if(s=f.length,g.keys(e).length!==s)return!1;for(;s--;)if(c=f[s],!g.has(e,c)||!M(n[c],e[c],t,r))return!1}return t.pop(),r.pop(),!0};g.isEqual=function(n,e){return M(n,e)},g.isEmpty=function(n){return null==n||(I(n)&&(g.isArray(n)||g.isString(n)||g.isArguments(n))?0===n.length:0===g.keys(n).length)},g.isElement=function(n){return!(!n||1!==n.nodeType)},g.isArray=h||function(n){return"[object Array]"===l.call(n)},g.isObject=function(n){var e=typeof n;return"function"===e||"object"===e&&!!n},g.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){g["is"+n]=function(e){return l.call(e)==="[object "+n+"]"}}),g.isArguments(arguments)||(g.isArguments=function(n){return g.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(g.isFunction=function(n){return"function"==typeof n||!1}),g.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},g.isNaN=function(n){return g.isNumber(n)&&n!==+n},g.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===l.call(n)},g.isNull=function(n){return null===n},g.isUndefined=function(n){return void 0===n},g.has=function(n,e){return null!=n&&p.call(n,e)},g.noConflict=function(){return i._=o,this},g.identity=function(n){return n},g.constant=function(n){return function(){return n}},g.noop=function(){},g.property=x,g.propertyOf=function(n){return null==n?function(){}:function(e){return n[e]}},g.matcher=g.matches=function(n){return n=g.extendOwn({},n),function(e){return g.isMatch(e,n)}},g.times=function(n,e,t){var r=Array(Math.max(0,n));e=m(e,t,1);for(var i=0;i<n;i++)r[i]=e(i);return r},g.random=function(n,e){return null==e&&(e=n,n=0),n+Math.floor(Math.random()*(e-n+1))},g.now=Date.now||function(){return(new Date).getTime()};var k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=g.invert(k),q=function(n){var e=function(e){return n[e]},t="(?:"+g.keys(n).join("|")+")",r=RegExp(t),i=RegExp(t,"g");return function(n){return n=null==n?"":""+n,r.test(n)?n.replace(i,e):n}};g.escape=q(k),g.unescape=q(T),g.result=function(n,e,t){var r=null==n?void 0:n[e];return void 0===r&&(r=t),g.isFunction(r)?r.call(n):r};var F=0;g.uniqueId=function(n){var e=++F+"";return n?n+e:e},g.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,L=function(n){return"\\"+K[n]};g.template=function(n,e,t){!e&&t&&(e=t),e=g.defaults({},e,g.templateSettings);var r=RegExp([(e.escape||C).source,(e.interpolate||C).source,(e.evaluate||C).source].join("|")+"|$","g"),i=0,o="__p+='";n.replace(r,function(e,t,r,u,a){return o+=n.slice(i,a).replace(D,L),i=a+e.length,t?o+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":u&&(o+="';\n"+u+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var u=new Function(e.variable||"obj","_",o)}catch(a){throw a.source=o,a}var s=function(n){return u.call(this,n,g)},c=e.variable||"obj";return s.source="function("+c+"){\n"+o+"}",s},g.chain=function(n){var e=g(n);return e._chain=!0,e};var J=function(n,e){return n._chain?g(e).chain():e};g.mixin=function(n){g.each(g.functions(n),function(e){var t=g[e]=n[e];g.prototype[e]=function(){var n=[this._wrapped];return c.apply(n,arguments),J(this,t.apply(g,n))}})},g.mixin(g),g.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var e=u[n];g.prototype[n]=function(){var t=this._wrapped;return e.apply(t,arguments),"shift"!==n&&"splice"!==n||0!==t.length||delete t[0],J(this,t)}}),g.each(["concat","join","slice"],function(n){var e=u[n];g.prototype[n]=function(){return J(this,e.apply(this._wrapped,arguments))}}),g.prototype.value=function(){return this._wrapped},g.prototype.valueOf=g.prototype.toJSON=g.prototype.value,g.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return g})}.call(this)),function(n){n.Parse=n.Parse||{};var e=n.Parse,t="function"==typeof require?require:null;"undefined"!=typeof XMLHttpRequest?e.XMLHttpRequest=XMLHttpRequest:"function"==typeof require&&"undefined"==typeof require.ensure&&(e.XMLHttpRequest=t("xmlhttprequest").XMLHttpRequest),"undefined"!=typeof exports&&exports._?(e._=exports._.noConflict(),exports.Parse=e):e._=_.noConflict(),"undefined"!=typeof $&&(e.$=$);var r=function(){},i=function(n,t,i){var o;return o=t&&t.hasOwnProperty("constructor")?t.constructor:function(){n.apply(this,arguments)},e._.extend(o,n),r.prototype=n.prototype,o.prototype=new r,t&&e._.extend(o.prototype,t),i&&e._.extend(o,i),o.prototype.constructor=o,o.__super__=n.prototype,o};e.serverURL="https://api.parse.com","undefined"!=typeof process&&process.versions&&process.versions.node&&(e._isNode=!0),e.initialize=function(n,t,r){if(r)throw new Error("Parse.initialize() was passed a Master Key, which is only allowed from within Node.js.");e._initialize(n,t)},e._initialize=function(n,t,r){e.applicationId=n,e.javaScriptKey=t,e.masterKey=r,e._useMasterKey=!1},e._isNode&&(e.initialize=e._initialize,e.Cloud=e.Cloud||{},e.Cloud.useMasterKey=function(){e._useMasterKey=!0}),e._getParsePath=function(n){if(!e.applicationId)throw new Error("You need to call Parse.initialize before using Parse.");if(n||(n=""),!e._.isString(n))throw new Error("Tried to get a Storage path that wasn't a String.");return"/"===n[0]&&(n=n.substring(1)),"Parse/"+e.applicationId+"/"+n},e._installationId=null,e._getInstallationId=function(){if(e._installationId)return e.Promise.as(e._installationId);var n=e._getParsePath("installationId");return e.Storage.getItemAsync(n).then(function(t){if(e._installationId=t,!e._installationId||""===e._installationId){var r=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e._installationId=r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r(),e.Storage.setItemAsync(n,e._installationId)}return e.Promise.as(e._installationId)})},e._parseDate=function(n){var e=new RegExp("^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})T([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(.([0-9]+))?Z$"),t=e.exec(n);if(!t)return null;var r=t[1]||0,i=(t[2]||1)-1,o=t[3]||0,u=t[4]||0,a=t[5]||0,s=t[6]||0,c=t[8]||0;return new Date(Date.UTC(r,i,o,u,a,s,c))},e._ajaxIE8=function(n,t,r){var i=new e.Promise,o=new XDomainRequest;return o.onload=function(){var n;try{n=JSON.parse(o.responseText)}catch(e){i.reject(e)}n&&i.resolve(n)},o.onerror=o.ontimeout=function(){var n={responseText:JSON.stringify({code:e.Error.X_DOMAIN_REQUEST,error:"IE's XDomainRequest does not supply error info."})};i.reject(n)},o.onprogress=function(){},o.open(n,t),o.send(r),i},e._useXDomainRequest=function(){return"undefined"!=typeof XDomainRequest&&!("withCredentials"in new XMLHttpRequest)},e._ajax=function(n,t,r,i,o){var u={success:i,error:o};if(e._useXDomainRequest())return e._ajaxIE8(n,t,r)._thenRunCallbacks(u);var a=new e.Promise,s=0,c=function(){var i=!1,o=new e.XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState){if(i)return;if(i=!0,o.status>=200&&o.status<300){var n;try{n=JSON.parse(o.responseText)}catch(e){a.reject(e)}n&&a.resolve(n,o.status,o)}else if(o.status>=500)if(++s<5){var t=Math.round(125*Math.random()*Math.pow(2,s));setTimeout(c,t)}else a.reject(o);else a.reject(o)}},o.open(n,t,!0),o.setRequestHeader("Content-Type","text/plain"),e._isNode&&o.setRequestHeader("User-Agent","Parse/"+e.VERSION+" (NodeJS "+process.versions.node+")"),o.send(r)};return c(),a._thenRunCallbacks(u)},e._extend=function(n,e){var t=i(this,n,e);return t.extend=this.extend,t},e._request=function(n){var t=n.route,r=n.className,i=n.objectId,o=n.method,u=n.useMasterKey,a=n.sessionToken,s=n.data;if(!e.applicationId)throw new Error("You must specify your applicationId using Parse.initialize.");if(!e.javaScriptKey&&!e.masterKey)throw new Error("You must specify a key using Parse.initialize.");if("batch"!==t&&"classes"!==t&&"events"!==t&&"files"!==t&&"functions"!==t&&"login"!==t&&"logout"!==t&&"push"!==t&&"requestPasswordReset"!==t&&"rest_verify_analytics"!==t&&"users"!==t&&"jobs"!==t&&"config"!==t&&"sessions"!==t&&"upgradeToRevocableSession"!==t)throw new Error("Bad route: '"+t+"'.");var c=e.serverURL;if("/"!==c.charAt(c.length-1)&&(c+="/"),c+="1/"+t,r&&(c+="/"+r),i&&(c+="/"+i),s=e._.clone(s||{}),"POST"!==o&&(s._method=o,o="POST"),e._.isUndefined(u)&&(u=e._useMasterKey),s._ApplicationId=e.applicationId,u){if(!e.masterKey)throw new Error("Cannot use the Master Key, it has not been provided.");s._MasterKey=e.masterKey}else s._JavaScriptKey=e.javaScriptKey;return s._ClientVersion=e.VERSION,e._getInstallationId().then(function(n){return s._InstallationId=n,a?e.Promise.as({_sessionToken:a}):e.User._canUseCurrentUser()?e.User._currentAsync():e.Promise.as(null)}).then(function(n){n&&n._sessionToken&&(s._SessionToken=n._sessionToken),e.User._isRevocableSessionEnabled&&(s._RevocableSession="1");var t=JSON.stringify(s);return e._ajax(o,c,t)}).then(null,function(n){var t;if(n&&n.responseText)try{var r=JSON.parse(n.responseText);t=new e.Error(r.code,r.error)}catch(i){t=new e.Error(e.Error.INVALID_JSON,"Received an error with invalid JSON from Parse: "+n.responseText)}else t=new e.Error(e.Error.CONNECTION_FAILED,"XMLHttpRequest failed: "+JSON.stringify(n));return e.Promise.error(t)})},e._getValue=function(n,t){return n&&n[t]?e._.isFunction(n[t])?n[t]():n[t]:null},e._encode=function(n,t,r){var i=e._;if(n instanceof e.Object){if(r)throw new Error("Parse.Objects not allowed here");if(!t||i.include(t,n)||!n._hasData)return n._toPointer();if(!n.dirty())return t=t.concat(n),e._encode(n._toFullJSON(t),t,r);throw new Error("Tried to save an object with a pointer to a new, unsaved object.")}if(n instanceof e.ACL)return n.toJSON();if(i.isDate(n)){if(isNaN(n))throw new Error("Cannot encode invalid Date");return{__type:"Date",iso:n.toJSON()}}if(n instanceof e.GeoPoint)return n.toJSON();if(i.isArray(n))return i.map(n,function(n){return e._encode(n,t,r)});if(i.isRegExp(n))return n.source;if(n instanceof e.Relation)return n.toJSON();if(n instanceof e.Op)return n.toJSON();if(n instanceof e.File){if(!n.url())throw new Error("Tried to save an object containing an unsaved file.");return{__type:"File",name:n.name(),url:n.url()}}if(i.isObject(n)){var o={};return e._objectEach(n,function(n,i){o[i]=e._encode(n,t,r)}),o}return n},e._decode=function(n,t){var r=e._;if(!r.isObject(t))return t;if(r.isArray(t))return e._arrayEach(t,function(n,r){t[r]=e._decode(r,n)}),t;if(t instanceof e.Object)return t;if(t instanceof e.File)return t;if(t instanceof e.Op)return t;if(t.__op)return e.Op._decode(t);if("Pointer"===t.__type&&t.className){var i=e.Object._create(t.className);return i._finishFetch({objectId:t.objectId},!1),i}if("Object"===t.__type&&t.className){var o=t.className;delete t.__type,delete t.className;var u=e.Object._create(o);return u._finishFetch(t,!0),u}if("Date"===t.__type)return e._parseDate(t.iso);if("GeoPoint"===t.__type)return new e.GeoPoint({latitude:t.latitude,longitude:t.longitude});if("ACL"===n)return t instanceof e.ACL?t:new e.ACL(t);if("Relation"===t.__type){var a=new e.Relation(null,n);return a.targetClassName=t.className,a}if("File"===t.__type){var s=new e.File(t.name);return s._url=t.url,s}return e._objectEach(t,function(n,r){t[r]=e._decode(r,n)}),t},e._arrayEach=e._.each,e._traverse=function(n,t,r){if(n instanceof e.Object){if(r=r||[],e._.indexOf(r,n)>=0)return;return r.push(n),e._traverse(n.attributes,t,r),t(n)}return n instanceof e.Relation||n instanceof e.File?t(n):e._.isArray(n)?(e._.each(n,function(i,o){var u=e._traverse(i,t,r);u&&(n[o]=u)}),t(n)):e._.isObject(n)?(e._each(n,function(i,o){var u=e._traverse(i,t,r);u&&(n[o]=u)}),t(n)):t(n)},e._objectEach=e._each=function(n,t){var r=e._;r.isObject(n)?r.each(r.keys(n),function(e){t(n[e],e)}):r.each(n,t)},e._isNullOrUndefined=function(n){return e._.isNull(n)||e._.isUndefined(n)}}(this);
//# sourceMappingURL=parsebone.min.js.map
