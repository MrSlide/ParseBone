/*!
 * Parse JavaScript SDK
 * Version: 1.5.0
 * Built: Fri Jul 10 2015 17:05:46
 * http://parse.com
 *
 * Copyright 2015 Parse, LLC
 *
 * Includes: Underscore.js
 * Copyright 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
 * Released under the MIT license.
 */
!function(n){n.Parse=n.Parse||{},n.Parse.VERSION="js1.5.0"}(this)(function(){function n(n){function e(e,t,r,i,o,u){for(;o>=0&&o<u;o+=n){var a=i?i[o]:o;r=t(r,e[a],a,e)}return r}return function(t,r,i,o){r=g(r,o,4);var u=!S(t)&&m.keys(t),a=(u||t).length,s=n>0?0:a-1;return arguments.length<3&&(i=t[u?u[s]:s],s+=n),e(t,r,i,u,s,a)}}function e(n){return function(e,t,r){t=w(t,r);for(var i=x(e),o=n>0?0:i-1;o>=0&&o<i;o+=n)if(t(e[o],o,e))return o;return-1}}function t(n,e,t){return function(r,i,o){var u=0,a=x(r);if("number"==typeof o)n>0?u=o>=0?o:Math.max(o+a,u):a=o>=0?Math.min(o+1,a):o+a+1;else if(t&&o&&a)return o=t(r,i),r[o]===i?o:-1;if(i!==i)return o=e(f.call(r,u,a),m.isNaN),o>=0?o+u:-1;for(o=n>0?u:a-1;o>=0&&o<a;o+=n)if(r[o]===i)return o;return-1}}function r(n,e){var t=R.length,r=n.constructor,i=m.isFunction(r)&&r.prototype||a,o="constructor";for(m.has(n,o)&&!m.contains(e,o)&&e.push(o);t--;)o=R[t],o in n&&n[o]!==i[o]&&!m.contains(e,o)&&e.push(o)}var i=this,o=i._,u=Array.prototype,a=Object.prototype,s=Function.prototype,c=u.push,f=u.slice,l=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,d=s.bind,y=Object.create,_=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):i._=m,m.VERSION="1.8.3";var g=function(n,e,t){if(void 0===e)return n;switch(null==t?3:t){case 1:return function(t){return n.call(e,t)};case 2:return function(t,r){return n.call(e,t,r)};case 3:return function(t,r,i){return n.call(e,t,r,i)};case 4:return function(t,r,i,o){return n.call(e,t,r,i,o)}}return function(){return n.apply(e,arguments)}},w=function(n,e,t){return null==n?m.identity:m.isFunction(n)?g(n,e,t):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,e){return w(n,e,1/0)};var b=function(n,e){return function(t){var r=arguments.length;if(r<2||null==t)return t;for(var i=1;i<r;i++)for(var o=arguments[i],u=n(o),a=u.length,s=0;s<a;s++){var c=u[s];e&&void 0!==t[c]||(t[c]=o[c])}return t}},j=function(n){if(!m.isObject(n))return{};if(y)return y(n);_.prototype=n;var e=new _;return _.prototype=null,e},I=function(n){return function(e){return null==e?void 0:e[n]}},O=Math.pow(2,53)-1,x=I("length"),S=function(n){var e=x(n);return"number"==typeof e&&e>=0&&e<=O};m.each=m.forEach=function(n,e,t){e=g(e,t);var r,i;if(S(n))for(r=0,i=n.length;r<i;r++)e(n[r],r,n);else{var o=m.keys(n);for(r=0,i=o.length;r<i;r++)e(n[o[r]],o[r],n)}return n},m.map=m.collect=function(n,e,t){e=w(e,t);for(var r=!S(n)&&m.keys(n),i=(r||n).length,o=Array(i),u=0;u<i;u++){var a=r?r[u]:u;o[u]=e(n[a],a,n)}return o},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,e,t){var r;if(r=S(n)?m.findIndex(n,e,t):m.findKey(n,e,t),void 0!==r&&r!==-1)return n[r]},m.filter=m.select=function(n,e,t){var r=[];return e=w(e,t),m.each(n,function(n,t,i){e(n,t,i)&&r.push(n)}),r},m.reject=function(n,e,t){return m.filter(n,m.negate(w(e)),t)},m.every=m.all=function(n,e,t){e=w(e,t);for(var r=!S(n)&&m.keys(n),i=(r||n).length,o=0;o<i;o++){var u=r?r[o]:o;if(!e(n[u],u,n))return!1}return!0},m.some=m.any=function(n,e,t){e=w(e,t);for(var r=!S(n)&&m.keys(n),i=(r||n).length,o=0;o<i;o++){var u=r?r[o]:o;if(e(n[u],u,n))return!0}return!1},m.contains=m.includes=m.include=function(n,e,t,r){return S(n)||(n=m.values(n)),("number"!=typeof t||r)&&(t=0),m.indexOf(n,e,t)>=0},m.invoke=function(n,e){var t=f.call(arguments,2),r=m.isFunction(e);return m.map(n,function(n){var i=r?e:n[e];return null==i?i:i.apply(n,t)})},m.pluck=function(n,e){return m.map(n,m.property(e))},m.where=function(n,e){return m.filter(n,m.matcher(e))},m.findWhere=function(n,e){return m.find(n,m.matcher(e))},m.max=function(n,e,t){var r,i,o=-(1/0),u=-(1/0);if(null==e&&null!=n){n=S(n)?n:m.values(n);for(var a=0,s=n.length;a<s;a++)r=n[a],r>o&&(o=r)}else e=w(e,t),m.each(n,function(n,t,r){i=e(n,t,r),(i>u||i===-(1/0)&&o===-(1/0))&&(o=n,u=i)});return o},m.min=function(n,e,t){var r,i,o=1/0,u=1/0;if(null==e&&null!=n){n=S(n)?n:m.values(n);for(var a=0,s=n.length;a<s;a++)r=n[a],r<o&&(o=r)}else e=w(e,t),m.each(n,function(n,t,r){i=e(n,t,r),(i<u||i===1/0&&o===1/0)&&(o=n,u=i)});return o},m.shuffle=function(n){for(var e,t=S(n)?n:m.values(n),r=t.length,i=Array(r),o=0;o<r;o++)e=m.random(0,o),e!==o&&(i[o]=i[e]),i[e]=t[o];return i},m.sample=function(n,e,t){return null==e||t?(S(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,e))},m.sortBy=function(n,e,t){return e=w(e,t),m.pluck(m.map(n,function(n,t,r){return{value:n,index:t,criteria:e(n,t,r)}}).sort(function(n,e){var t=n.criteria,r=e.criteria;if(t!==r){if(t>r||void 0===t)return 1;if(t<r||void 0===r)return-1}return n.index-e.index}),"value")};var A=function(n){return function(e,t,r){var i={};return t=w(t,r),m.each(e,function(r,o){var u=t(r,o,e);n(i,r,u)}),i}};m.groupBy=A(function(n,e,t){m.has(n,t)?n[t].push(e):n[t]=[e]}),m.indexBy=A(function(n,e,t){n[t]=e}),m.countBy=A(function(n,e,t){m.has(n,t)?n[t]++:n[t]=1}),m.toArray=function(n){return n?m.isArray(n)?f.call(n):S(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:S(n)?n.length:m.keys(n).length},m.partition=function(n,e,t){e=w(e,t);var r=[],i=[];return m.each(n,function(n,t,o){(e(n,t,o)?r:i).push(n)}),[r,i]},m.first=m.head=m.take=function(n,e,t){if(null!=n)return null==e||t?n[0]:m.initial(n,n.length-e)},m.initial=function(n,e,t){return f.call(n,0,Math.max(0,n.length-(null==e||t?1:e)))},m.last=function(n,e,t){if(null!=n)return null==e||t?n[n.length-1]:m.rest(n,Math.max(0,n.length-e))},m.rest=m.tail=m.drop=function(n,e,t){return f.call(n,null==e||t?1:e)},m.compact=function(n){return m.filter(n,m.identity)};var N=function(n,e,t,r){for(var i=[],o=0,u=r||0,a=x(n);u<a;u++){var s=n[u];if(S(s)&&(m.isArray(s)||m.isArguments(s))){e||(s=N(s,e,t));var c=0,f=s.length;for(i.length+=f;c<f;)i[o++]=s[c++]}else t||(i[o++]=s)}return i};m.flatten=function(n,e){return N(n,e,!1)},m.without=function(n){return m.difference(n,f.call(arguments,1))},m.uniq=m.unique=function(n,e,t,r){m.isBoolean(e)||(r=t,t=e,e=!1),null!=t&&(t=w(t,r));for(var i=[],o=[],u=0,a=x(n);u<a;u++){var s=n[u],c=t?t(s,u,n):s;e?(u&&o===c||i.push(s),o=c):t?m.contains(o,c)||(o.push(c),i.push(s)):m.contains(i,s)||i.push(s)}return i},m.union=function(){return m.uniq(N(arguments,!0,!0))},m.intersection=function(n){for(var e=[],t=arguments.length,r=0,i=x(n);r<i;r++){var o=n[r];if(!m.contains(e,o)){for(var u=1;u<t&&m.contains(arguments[u],o);u++);u===t&&e.push(o)}}return e},m.difference=function(n){var e=N(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(e,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var e=n&&m.max(n,x).length||0,t=Array(e),r=0;r<e;r++)t[r]=m.pluck(n,r);return t},m.object=function(n,e){for(var t={},r=0,i=x(n);r<i;r++)e?t[n[r]]=e[r]:t[n[r][0]]=n[r][1];return t},m.findIndex=e(1),m.findLastIndex=e(-1),m.sortedIndex=function(n,e,t,r){t=w(t,r,1);for(var i=t(e),o=0,u=x(n);o<u;){var a=Math.floor((o+u)/2);t(n[a])<i?o=a+1:u=a}return o},m.indexOf=t(1,m.findIndex,m.sortedIndex),m.lastIndexOf=t(-1,m.findLastIndex),m.range=function(n,e,t){null==e&&(e=n||0,n=0),t=t||1;for(var r=Math.max(Math.ceil((e-n)/t),0),i=Array(r),o=0;o<r;o++,n+=t)i[o]=n;return i};var E=function(n,e,t,r,i){if(!(r instanceof e))return n.apply(t,i);var o=j(n.prototype),u=n.apply(o,i);return m.isObject(u)?u:o};m.bind=function(n,e){if(d&&n.bind===d)return d.apply(n,f.call(arguments,1));if(!m.isFunction(n))throw new TypeError("Bind must be called on a function");var t=f.call(arguments,2),r=function(){return E(n,r,e,this,t.concat(f.call(arguments)))};return r},m.partial=function(n){var e=f.call(arguments,1),t=function(){for(var r=0,i=e.length,o=Array(i),u=0;u<i;u++)o[u]=e[u]===m?arguments[r++]:e[u];for(;r<arguments.length;)o.push(arguments[r++]);return E(n,t,this,this,o)};return t},m.bindAll=function(n){var e,t,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(e=1;e<r;e++)t=arguments[e],n[t]=m.bind(n[t],n);return n},m.memoize=function(n,e){var t=function(r){var i=t.cache,o=""+(e?e.apply(this,arguments):r);return m.has(i,o)||(i[o]=n.apply(this,arguments)),i[o]};return t.cache={},t},m.delay=function(n,e){var t=f.call(arguments,2);return setTimeout(function(){return n.apply(null,t)},e)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,e,t){var r,i,o,u=null,a=0;t||(t={});var s=function(){a=t.leading===!1?0:m.now(),u=null,o=n.apply(r,i),u||(r=i=null)};return function(){var c=m.now();a||t.leading!==!1||(a=c);var f=e-(c-a);return r=this,i=arguments,f<=0||f>e?(u&&(clearTimeout(u),u=null),a=c,o=n.apply(r,i),u||(r=i=null)):u||t.trailing===!1||(u=setTimeout(s,f)),o}},m.debounce=function(n,e,t){var r,i,o,u,a,s=function(){var c=m.now()-u;c<e&&c>=0?r=setTimeout(s,e-c):(r=null,t||(a=n.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,u=m.now();var c=t&&!r;return r||(r=setTimeout(s,e)),c&&(a=n.apply(o,i),o=i=null),a}},m.wrap=function(n,e){return m.partial(e,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,e=n.length-1;return function(){for(var t=e,r=n[e].apply(this,arguments);t--;)r=n[t].call(this,r);return r}},m.after=function(n,e){return function(){if(--n<1)return e.apply(this,arguments)}},m.before=function(n,e){var t;return function(){return--n>0&&(t=e.apply(this,arguments)),n<=1&&(e=null),t}},m.once=m.partial(m.before,2);var P=!{toString:null}.propertyIsEnumerable("toString"),R=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(n){if(!m.isObject(n))return[];if(v)return v(n);var e=[];for(var t in n)m.has(n,t)&&e.push(t);return P&&r(n,e),e},m.allKeys=function(n){if(!m.isObject(n))return[];var e=[];for(var t in n)e.push(t);return P&&r(n,e),e},m.values=function(n){for(var e=m.keys(n),t=e.length,r=Array(t),i=0;i<t;i++)r[i]=n[e[i]];return r},m.mapObject=function(n,e,t){e=w(e,t);for(var r,i=m.keys(n),o=i.length,u={},a=0;a<o;a++)r=i[a],u[r]=e(n[r],r,n);return u},m.pairs=function(n){for(var e=m.keys(n),t=e.length,r=Array(t),i=0;i<t;i++)r[i]=[e[i],n[e[i]]];return r},m.invert=function(n){for(var e={},t=m.keys(n),r=0,i=t.length;r<i;r++)e[n[t[r]]]=t[r];return e},m.functions=m.methods=function(n){var e=[];for(var t in n)m.isFunction(n[t])&&e.push(t);return e.sort()},m.extend=b(m.allKeys),m.extendOwn=m.assign=b(m.keys),m.findKey=function(n,e,t){e=w(e,t);for(var r,i=m.keys(n),o=0,u=i.length;o<u;o++)if(r=i[o],e(n[r],r,n))return r},m.pick=function(n,e,t){var r,i,o={},u=n;if(null==u)return o;m.isFunction(e)?(i=m.allKeys(u),r=g(e,t)):(i=N(arguments,!1,!1,1),r=function(n,e,t){return e in t},u=Object(u));for(var a=0,s=i.length;a<s;a++){var c=i[a],f=u[c];r(f,c,u)&&(o[c]=f)}return o},m.omit=function(n,e,t){if(m.isFunction(e))e=m.negate(e);else{var r=m.map(N(arguments,!1,!1,1),String);e=function(n,e){return!m.contains(r,e)}}return m.pick(n,e,t)},m.defaults=b(m.allKeys,!0),m.create=function(n,e){var t=j(n);return e&&m.extendOwn(t,e),t},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,e){return e(n),n},m.isMatch=function(n,e){var t=m.keys(e),r=t.length;if(null==n)return!r;for(var i=Object(n),o=0;o<r;o++){var u=t[o];if(e[u]!==i[u]||!(u in i))return!1}return!0};var M=function(n,e,t,r){if(n===e)return 0!==n||1/n===1/e;if(null==n||null==e)return n===e;n instanceof m&&(n=n._wrapped),e instanceof m&&(e=e._wrapped);var i=l.call(n);if(i!==l.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+n==""+e;case"[object Number]":return+n!==+n?+e!==+e:0===+n?1/+n===1/e:+n===+e;case"[object Date]":case"[object Boolean]":return+n===+e}var o="[object Array]"===i;if(!o){if("object"!=typeof n||"object"!=typeof e)return!1;var u=n.constructor,a=e.constructor;if(u!==a&&!(m.isFunction(u)&&u instanceof u&&m.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in e)return!1}t=t||[],r=r||[];for(var s=t.length;s--;)if(t[s]===n)return r[s]===e;if(t.push(n),r.push(e),o){if(s=n.length,s!==e.length)return!1;for(;s--;)if(!M(n[s],e[s],t,r))return!1}else{var c,f=m.keys(n);if(s=f.length,m.keys(e).length!==s)return!1;for(;s--;)if(c=f[s],!m.has(e,c)||!M(n[c],e[c],t,r))return!1}return t.pop(),r.pop(),!0};m.isEqual=function(n,e){return M(n,e)},m.isEmpty=function(n){return null==n||(S(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length)},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=h||function(n){return"[object Array]"===l.call(n)},m.isObject=function(n){var e=typeof n;return"function"===e||"object"===e&&!!n},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){m["is"+n]=function(e){return l.call(e)==="[object "+n+"]"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(n){return"function"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===l.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return void 0===n},m.has=function(n,e){return null!=n&&p.call(n,e)},m.noConflict=function(){return i._=o,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=I,m.propertyOf=function(n){return null==n?function(){}:function(e){return n[e]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(e){return m.isMatch(e,n)}},m.times=function(n,e,t){var r=Array(Math.max(0,n));e=g(e,t,1);for(var i=0;i<n;i++)r[i]=e(i);return r},m.random=function(n,e){return null==e&&(e=n,n=0),n+Math.floor(Math.random()*(e-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=m.invert(k),q=function(n){var e=function(e){return n[e]},t="(?:"+m.keys(n).join("|")+")",r=RegExp(t),i=RegExp(t,"g");return function(n){return n=null==n?"":""+n,r.test(n)?n.replace(i,e):n}};m.escape=q(k),m.unescape=q(T),m.result=function(n,e,t){var r=null==n?void 0:n[e];return void 0===r&&(r=t),m.isFunction(r)?r.call(n):r};var F=0;m.uniqueId=function(n){var e=++F+"";return n?n+e:e},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,L=function(n){return"\\"+K[n]};m.template=function(n,e,t){!e&&t&&(e=t),e=m.defaults({},e,m.templateSettings);var r=RegExp([(e.escape||C).source,(e.interpolate||C).source,(e.evaluate||C).source].join("|")+"|$","g"),i=0,o="__p+='";n.replace(r,function(e,t,r,u,a){return o+=n.slice(i,a).replace(D,L),i=a+e.length,t?o+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":u&&(o+="';\n"+u+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var u=new Function(e.variable||"obj","_",o)}catch(a){throw a.source=o,a}var s=function(n){return u.call(this,n,m)},c=e.variable||"obj";return s.source="function("+c+"){\n"+o+"}",s},m.chain=function(n){var e=m(n);return e._chain=!0,e};var J=function(n,e){return n._chain?m(e).chain():e};m.mixin=function(n){m.each(m.functions(n),function(e){var t=m[e]=n[e];m.prototype[e]=function(){var n=[this._wrapped];return c.apply(n,arguments),J(this,t.apply(m,n))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var e=u[n];m.prototype[n]=function(){var t=this._wrapped;return e.apply(t,arguments),"shift"!==n&&"splice"!==n||0!==t.length||delete t[0],J(this,t)}}),m.each(["concat","join","slice"],function(n){var e=u[n];m.prototype[n]=function(){return J(this,e.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}.call(this)),function(n){n.Parse=n.Parse||{};var e=n.Parse,t="function"==typeof require?require:null;"undefined"!=typeof XMLHttpRequest?e.XMLHttpRequest=XMLHttpRequest:t&&"undefined"==typeof require.ensure&&(e.XMLHttpRequest=t("xmlhttprequest").XMLHttpRequest),"undefined"!=typeof exports&&exports._?(e._=exports._.noConflict(),exports.Parse=e):e._=_.noConflict(),"undefined"!=typeof $&&(e.$=$);var r=function(){},i=function(n,t,i){var o;return o=t&&t.hasOwnProperty("constructor")?t.constructor:function(){n.apply(this,arguments)},e._.extend(o,n),r.prototype=n.prototype,o.prototype=new r,t&&e._.extend(o.prototype,t),i&&e._.extend(o,i),o.prototype.constructor=o,o.__super__=n.prototype,o};e.serverURL="https://api.parse.com","undefined"!=typeof process&&process.versions&&process.versions.node&&(e._isNode=!0),e.initialize=function(n,t,r){if(r)throw new Error("Parse.initialize() was passed a Master Key, which is only allowed from within Node.js.");e._initialize(n,t)},e._initialize=function(n,t,r){e.applicationId=n,e.javaScriptKey=t,e.masterKey=r,e._useMasterKey=!1},e._isNode&&(e.initialize=e._initialize,e.Cloud=e.Cloud||{},e.Cloud.useMasterKey=function(){e._useMasterKey=!0}),e._getParsePath=function(n){if(!e.applicationId)throw new Error("You need to call Parse.initialize before using Parse.");if(n||(n=""),!e._.isString(n))throw new Error("Tried to get a Storage path that wasn't a String.");return"/"===n[0]&&(n=n.substring(1)),"Parse/"+e.applicationId+"/"+n},e._installationId=null,e._getInstallationId=function(){if(e._installationId)return e.Promise.as(e._installationId);var n=e._getParsePath("installationId");return e.Storage.getItemAsync(n).then(function(t){if(e._installationId=t,!e._installationId||""===e._installationId){var r=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e._installationId=r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r(),e.Storage.setItemAsync(n,e._installationId)}return e.Promise.as(e._installationId)})},e._parseDate=function(n){var e=new RegExp("^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})T([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(.([0-9]+))?Z$"),t=e.exec(n);if(!t)return null;var r=t[1]||0,i=(t[2]||1)-1,o=t[3]||0,u=t[4]||0,a=t[5]||0,s=t[6]||0,c=t[8]||0;return new Date(Date.UTC(r,i,o,u,a,s,c))},e._ajaxIE8=function(n,t,r){var i=new e.Promise,o=new XDomainRequest;return o.onload=function(){var n;try{n=JSON.parse(o.responseText)}catch(e){i.reject(e)}n&&i.resolve(n)},o.onerror=o.ontimeout=function(){var n={responseText:JSON.stringify({code:e.Error.X_DOMAIN_REQUEST,error:"IE's XDomainRequest does not supply error info."})};i.reject(n)},o.onprogress=function(){},o.open(n,t),o.send(r),i},e._useXDomainRequest=function(){return"undefined"!=typeof XDomainRequest&&!("withCredentials"in new XMLHttpRequest)},e._ajax=function(n,t,r,i,o){var u={success:i,error:o};if(e._useXDomainRequest())return e._ajaxIE8(n,t,r)._thenRunCallbacks(u);var a=new e.Promise,s=0,c=function(){var i=!1,o=new e.XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState){if(i)return;if(i=!0,o.status>=200&&o.status<300){var n;try{n=JSON.parse(o.responseText)}catch(e){a.reject(e)}n&&a.resolve(n,o.status,o)}else if(o.status>=500)if(++s<5){var t=Math.round(125*Math.random()*Math.pow(2,s));setTimeout(c,t)}else a.reject(o);else a.reject(o)}},o.open(n,t,!0),o.setRequestHeader("Content-Type","text/plain"),e._isNode&&o.setRequestHeader("User-Agent","Parse/"+e.VERSION+" (NodeJS "+process.versions.node+")"),o.send(r)};return c(),a._thenRunCallbacks(u)},e._extend=function(n,e){var t=i(this,n,e);return t.extend=this.extend,t},e._request=function(n){var t=n.route,r=n.className,i=n.objectId,o=n.method,u=n.useMasterKey,a=n.sessionToken,s=n.data;if(!e.applicationId)throw new Error("You must specify your applicationId using Parse.initialize.");if(!e.javaScriptKey&&!e.masterKey)throw new Error("You must specify a key using Parse.initialize.");if("batch"!==t&&"classes"!==t&&"events"!==t&&"files"!==t&&"functions"!==t&&"login"!==t&&"logout"!==t&&"push"!==t&&"requestPasswordReset"!==t&&"rest_verify_analytics"!==t&&"users"!==t&&"jobs"!==t&&"config"!==t&&"sessions"!==t&&"upgradeToRevocableSession"!==t)throw new Error("Bad route: '"+t+"'.");var c=e.serverURL;if("/"!==c.charAt(c.length-1)&&(c+="/"),c+="1/"+t,r&&(c+="/"+r),i&&(c+="/"+i),s=e._.clone(s||{}),"POST"!==o&&(s._method=o,o="POST"),e._.isUndefined(u)&&(u=e._useMasterKey),s._ApplicationId=e.applicationId,u){if(!e.masterKey)throw new Error("Cannot use the Master Key, it has not been provided.");s._MasterKey=e.masterKey}else s._JavaScriptKey=e.javaScriptKey;return s._ClientVersion=e.VERSION,e._getInstallationId().then(function(n){return s._InstallationId=n,a?e.Promise.as({_sessionToken:a}):e.User._canUseCurrentUser()?e.User._currentAsync():e.Promise.as(null)}).then(function(n){n&&n._sessionToken&&(s._SessionToken=n._sessionToken),e.User._isRevocableSessionEnabled&&(s._RevocableSession="1");var t=JSON.stringify(s);return e._ajax(o,c,t)}).then(null,function(n){var t;if(n&&n.responseText)try{var r=JSON.parse(n.responseText);t=new e.Error(r.code,r.error)}catch(i){t=new e.Error(e.Error.INVALID_JSON,"Received an error with invalid JSON from Parse: "+n.responseText)}else t=new e.Error(e.Error.CONNECTION_FAILED,"XMLHttpRequest failed: "+JSON.stringify(n));return e.Promise.error(t)})},e._getValue=function(n,t){return n&&n[t]?e._.isFunction(n[t])?n[t]():n[t]:null},e._encode=function(n,t,r){var i=e._;if(n instanceof e.Object){if(r)throw new Error("Parse.Objects not allowed here");if(!t||i.include(t,n)||!n._hasData)return n._toPointer();if(!n.dirty())return t=t.concat(n),e._encode(n._toFullJSON(t),t,r);throw new Error("Tried to save an object with a pointer to a new, unsaved object.")}if(n instanceof e.ACL)return n.toJSON();if(i.isDate(n)){if(isNaN(n))throw new Error("Cannot encode invalid Date");return{__type:"Date",iso:n.toJSON()}}if(n instanceof e.GeoPoint)return n.toJSON();if(i.isArray(n))return i.map(n,function(n){return e._encode(n,t,r)});if(i.isRegExp(n))return n.source;if(n instanceof e.Relation)return n.toJSON();if(n instanceof e.Op)return n.toJSON();if(n instanceof e.File){if(!n.url())throw new Error("Tried to save an object containing an unsaved file.");return{__type:"File",name:n.name(),url:n.url()}}if(i.isObject(n)){var o={};return e._objectEach(n,function(n,i){o[i]=e._encode(n,t,r)}),o}return n},e._decode=function(n,t){var r=e._;if(!r.isObject(t))return t;if(r.isArray(t))return e._arrayEach(t,function(n,r){t[r]=e._decode(r,n)}),t;if(t instanceof e.Object)return t;if(t instanceof e.File)return t;if(t instanceof e.Op)return t;if(t.__op)return e.Op._decode(t);if("Pointer"===t.__type&&t.className){var i=e.Object._create(t.className);return i._finishFetch({objectId:t.objectId},!1),i}if("Object"===t.__type&&t.className){var o=t.className;delete t.__type,delete t.className;var u=e.Object._create(o);return u._finishFetch(t,!0),u}if("Date"===t.__type)return e._parseDate(t.iso);if("GeoPoint"===t.__type)return new e.GeoPoint({latitude:t.latitude,longitude:t.longitude});if("ACL"===n)return t instanceof e.ACL?t:new e.ACL(t);if("Relation"===t.__type){var a=new e.Relation(null,n);return a.targetClassName=t.className,a}if("File"===t.__type){var s=new e.File(t.name);return s._url=t.url,s}return e._objectEach(t,function(n,r){t[r]=e._decode(r,n)}),t},e._arrayEach=e._.each,e._traverse=function(n,t,r){if(n instanceof e.Object){if(r=r||[],e._.indexOf(r,n)>=0)return;return r.push(n),e._traverse(n.attributes,t,r),t(n)}return n instanceof e.Relation||n instanceof e.File?t(n):e._.isArray(n)?(e._.each(n,function(i,o){var u=e._traverse(i,t,r);u&&(n[o]=u)}),t(n)):e._.isObject(n)?(e._each(n,function(i,o){var u=e._traverse(i,t,r);u&&(n[o]=u)}),t(n)):t(n)},e._objectEach=e._each=function(n,t){var r=e._;r.isObject(n)?r.each(r.keys(n),function(e){t(n[e],e)}):r.each(n,t)},e._isNullOrUndefined=function(n){return e._.isNull(n)||e._.isUndefined(n)}}(this),function(n){n.Parse=n.Parse||{};var e=n.Parse,t={async:!1},r="undefined"!=typeof localStorage;if(r)try{localStorage.setItem("supported",!0),localStorage.removeItem("supported")}catch(i){r=!1}if(r)t.getItem=function(n){return localStorage.getItem(n)},t.setItem=function(n,e){return localStorage.setItem(n,e)},t.removeItem=function(n){return localStorage.removeItem(n)},t.clear=function(){return localStorage.clear()};else if("function"==typeof require&&"undefined"==typeof require.ensure){var o;try{o=require("AsyncStorage"),t.async=!0,t.getItemAsync=function(n){var t=new e.Promise;return o.getItem(n,function(n,e){n?t.reject(n):t.resolve(e)}),t},t.setItemAsync=function(n,t){var r=new e.Promise;return o.setItem(n,t,function(n){n?r.reject(n):r.resolve(t)}),r},t.removeItemAsync=function(n){var t=new e.Promise;return o.removeItem(n,function(n){n?t.reject(n):t.resolve()}),t},t.clear=function(){o.clear()}}catch(i){}}if(!t.async&&!t.getItem){var u=t.inMemoryMap={};t.getItem=function(n){return u.hasOwnProperty(n)?u[n]:null},t.setItem=function(n,e){u[n]=String(e)},t.removeItem=function(n){delete u[n]},t.clear=function(){for(var n in u)u.hasOwnProperty(n)&&delete u[n]}}t.async||(t.getItemAsync=function(n){return e.Promise.as(t.getItem(n))},t.setItemAsync=function(n,r){return t.setItem(n,r),e.Promise.as(r)},t.removeItemAsync=function(n){return e.Promise.as(t.removeItem(n))}),e.Storage=t}(this);
//# sourceMappingURL=parsebone.min.js.map
