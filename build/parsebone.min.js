/*!
 * Parse JavaScript SDK
 * Version: 1.5.0
 * Built: Fri Jul 10 2015 17:05:46
 * http://parse.com
 *
 * Copyright 2015 Parse, LLC
 *
 * Includes: Underscore.js
 * Copyright 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
 * Released under the MIT license.
 */
!function(e){e.Parse=e.Parse||{},e.Parse.VERSION="js1.5.0"}(this)(function(){function e(e){function t(t,r,n,i,s,o){for(;s>=0&&s<o;s+=e){var a=i?i[s]:s;n=r(n,t[a],a,t)}return n}return function(r,n,i,s){n=y(n,s,4);var o=!N(r)&&g.keys(r),a=(o||r).length,u=e>0?0:a-1;return arguments.length<3&&(i=r[o?o[u]:u],u+=e),t(r,n,i,o,u,a)}}function t(e){return function(t,r,n){r=b(r,n);for(var i=w(t),s=e>0?0:i-1;s>=0&&s<i;s+=e)if(r(t[s],s,t))return s;return-1}}function r(e,t,r){return function(n,i,s){var o=0,a=w(n);if("number"==typeof s)e>0?o=s>=0?s:Math.max(s+a,o):a=s>=0?Math.min(s+1,a):s+a+1;else if(r&&s&&a)return s=r(n,i),n[s]===i?s:-1;if(i!==i)return s=t(l.call(n,o,a),g.isNaN),s>=0?s+o:-1;for(s=e>0?o:a-1;s>=0&&s<a;s+=e)if(n[s]===i)return s;return-1}}function n(e,t){var r=R.length,n=e.constructor,i=g.isFunction(n)&&n.prototype||a,s="constructor";for(g.has(e,s)&&!g.contains(t,s)&&t.push(s);r--;)s=R[r],s in e&&e[s]!==i[s]&&!g.contains(t,s)&&t.push(s)}var i=this,s=i._,o=Array.prototype,a=Object.prototype,u=Function.prototype,c=o.push,l=o.slice,h=a.toString,f=a.hasOwnProperty,_=Array.isArray,d=Object.keys,p=u.bind,v=Object.create,m=function(){},g=function(e){return e instanceof g?e:this instanceof g?void(this._wrapped=e):new g(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=g),exports._=g):i._=g,g.VERSION="1.8.3";var y=function(e,t,r){if(void 0===t)return e;switch(null==r?3:r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,s){return e.call(t,r,n,i,s)}}return function(){return e.apply(t,arguments)}},b=function(e,t,r){return null==e?g.identity:g.isFunction(e)?y(e,t,r):g.isObject(e)?g.matcher(e):g.property(e)};g.iteratee=function(e,t){return b(e,t,1/0)};var E=function(e,t){return function(r){var n=arguments.length;if(n<2||null==r)return r;for(var i=1;i<n;i++)for(var s=arguments[i],o=e(s),a=o.length,u=0;u<a;u++){var c=o[u];t&&void 0!==r[c]||(r[c]=s[c])}return r}},O=function(e){if(!g.isObject(e))return{};if(v)return v(e);m.prototype=e;var t=new m;return m.prototype=null,t},A=function(e){return function(t){return null==t?void 0:t[e]}},S=Math.pow(2,53)-1,w=A("length"),N=function(e){var t=w(e);return"number"==typeof t&&t>=0&&t<=S};g.each=g.forEach=function(e,t,r){t=y(t,r);var n,i;if(N(e))for(n=0,i=e.length;n<i;n++)t(e[n],n,e);else{var s=g.keys(e);for(n=0,i=s.length;n<i;n++)t(e[s[n]],s[n],e)}return e},g.map=g.collect=function(e,t,r){t=b(t,r);for(var n=!N(e)&&g.keys(e),i=(n||e).length,s=Array(i),o=0;o<i;o++){var a=n?n[o]:o;s[o]=t(e[a],a,e)}return s},g.reduce=g.foldl=g.inject=e(1),g.reduceRight=g.foldr=e(-1),g.find=g.detect=function(e,t,r){var n;if(n=N(e)?g.findIndex(e,t,r):g.findKey(e,t,r),void 0!==n&&n!==-1)return e[n]},g.filter=g.select=function(e,t,r){var n=[];return t=b(t,r),g.each(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n},g.reject=function(e,t,r){return g.filter(e,g.negate(b(t)),r)},g.every=g.all=function(e,t,r){t=b(t,r);for(var n=!N(e)&&g.keys(e),i=(n||e).length,s=0;s<i;s++){var o=n?n[s]:s;if(!t(e[o],o,e))return!1}return!0},g.some=g.any=function(e,t,r){t=b(t,r);for(var n=!N(e)&&g.keys(e),i=(n||e).length,s=0;s<i;s++){var o=n?n[s]:s;if(t(e[o],o,e))return!0}return!1},g.contains=g.includes=g.include=function(e,t,r,n){return N(e)||(e=g.values(e)),("number"!=typeof r||n)&&(r=0),g.indexOf(e,t,r)>=0},g.invoke=function(e,t){var r=l.call(arguments,2),n=g.isFunction(t);return g.map(e,function(e){var i=n?t:e[t];return null==i?i:i.apply(e,r)})},g.pluck=function(e,t){return g.map(e,g.property(t))},g.where=function(e,t){return g.filter(e,g.matcher(t))},g.findWhere=function(e,t){return g.find(e,g.matcher(t))},g.max=function(e,t,r){var n,i,s=-(1/0),o=-(1/0);if(null==t&&null!=e){e=N(e)?e:g.values(e);for(var a=0,u=e.length;a<u;a++)n=e[a],n>s&&(s=n)}else t=b(t,r),g.each(e,function(e,r,n){i=t(e,r,n),(i>o||i===-(1/0)&&s===-(1/0))&&(s=e,o=i)});return s},g.min=function(e,t,r){var n,i,s=1/0,o=1/0;if(null==t&&null!=e){e=N(e)?e:g.values(e);for(var a=0,u=e.length;a<u;a++)n=e[a],n<s&&(s=n)}else t=b(t,r),g.each(e,function(e,r,n){i=t(e,r,n),(i<o||i===1/0&&s===1/0)&&(s=e,o=i)});return s},g.shuffle=function(e){for(var t,r=N(e)?e:g.values(e),n=r.length,i=Array(n),s=0;s<n;s++)t=g.random(0,s),t!==s&&(i[s]=i[t]),i[t]=r[s];return i},g.sample=function(e,t,r){return null==t||r?(N(e)||(e=g.values(e)),e[g.random(e.length-1)]):g.shuffle(e).slice(0,Math.max(0,t))},g.sortBy=function(e,t,r){return t=b(t,r),g.pluck(g.map(e,function(e,r,n){return{value:e,index:r,criteria:t(e,r,n)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index}),"value")};var j=function(e){return function(t,r,n){var i={};return r=b(r,n),g.each(t,function(n,s){var o=r(n,s,t);e(i,n,o)}),i}};g.groupBy=j(function(e,t,r){g.has(e,r)?e[r].push(t):e[r]=[t]}),g.indexBy=j(function(e,t,r){e[r]=t}),g.countBy=j(function(e,t,r){g.has(e,r)?e[r]++:e[r]=1}),g.toArray=function(e){return e?g.isArray(e)?l.call(e):N(e)?g.map(e,g.identity):g.values(e):[]},g.size=function(e){return null==e?0:N(e)?e.length:g.keys(e).length},g.partition=function(e,t,r){t=b(t,r);var n=[],i=[];return g.each(e,function(e,r,s){(t(e,r,s)?n:i).push(e)}),[n,i]},g.first=g.head=g.take=function(e,t,r){if(null!=e)return null==t||r?e[0]:g.initial(e,e.length-t)},g.initial=function(e,t,r){return l.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))},g.last=function(e,t,r){if(null!=e)return null==t||r?e[e.length-1]:g.rest(e,Math.max(0,e.length-t))},g.rest=g.tail=g.drop=function(e,t,r){return l.call(e,null==t||r?1:t)},g.compact=function(e){return g.filter(e,g.identity)};var C=function(e,t,r,n){for(var i=[],s=0,o=n||0,a=w(e);o<a;o++){var u=e[o];if(N(u)&&(g.isArray(u)||g.isArguments(u))){t||(u=C(u,t,r));var c=0,l=u.length;for(i.length+=l;c<l;)i[s++]=u[c++]}else r||(i[s++]=u)}return i};g.flatten=function(e,t){return C(e,t,!1)},g.without=function(e){return g.difference(e,l.call(arguments,1))},g.uniq=g.unique=function(e,t,r,n){g.isBoolean(t)||(n=r,r=t,t=!1),null!=r&&(r=b(r,n));for(var i=[],s=[],o=0,a=w(e);o<a;o++){var u=e[o],c=r?r(u,o,e):u;t?(o&&s===c||i.push(u),s=c):r?g.contains(s,c)||(s.push(c),i.push(u)):g.contains(i,u)||i.push(u)}return i},g.union=function(){return g.uniq(C(arguments,!0,!0))},g.intersection=function(e){for(var t=[],r=arguments.length,n=0,i=w(e);n<i;n++){var s=e[n];if(!g.contains(t,s)){for(var o=1;o<r&&g.contains(arguments[o],s);o++);o===r&&t.push(s)}}return t},g.difference=function(e){var t=C(arguments,!0,!0,1);return g.filter(e,function(e){return!g.contains(t,e)})},g.zip=function(){return g.unzip(arguments)},g.unzip=function(e){for(var t=e&&g.max(e,w).length||0,r=Array(t),n=0;n<t;n++)r[n]=g.pluck(e,n);return r},g.object=function(e,t){for(var r={},n=0,i=w(e);n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r},g.findIndex=t(1),g.findLastIndex=t(-1),g.sortedIndex=function(e,t,r,n){r=b(r,n,1);for(var i=r(t),s=0,o=w(e);s<o;){var a=Math.floor((s+o)/2);r(e[a])<i?s=a+1:o=a}return s},g.indexOf=r(1,g.findIndex,g.sortedIndex),g.lastIndexOf=r(-1,g.findLastIndex),g.range=function(e,t,r){null==t&&(t=e||0,e=0),r=r||1;for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),s=0;s<n;s++,e+=r)i[s]=e;return i};var P=function(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var s=O(e.prototype),o=e.apply(s,i);return g.isObject(o)?o:s};g.bind=function(e,t){if(p&&e.bind===p)return p.apply(e,l.call(arguments,1));if(!g.isFunction(e))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),n=function(){return P(e,n,t,this,r.concat(l.call(arguments)))};return n},g.partial=function(e){var t=l.call(arguments,1),r=function(){for(var n=0,i=t.length,s=Array(i),o=0;o<i;o++)s[o]=t[o]===g?arguments[n++]:t[o];for(;n<arguments.length;)s.push(arguments[n++]);return P(e,r,this,this,s)};return r},g.bindAll=function(e){var t,r,n=arguments.length;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++)r=arguments[t],e[r]=g.bind(e[r],e);return e},g.memoize=function(e,t){var r=function(n){var i=r.cache,s=""+(t?t.apply(this,arguments):n);return g.has(i,s)||(i[s]=e.apply(this,arguments)),i[s]};return r.cache={},r},g.delay=function(e,t){var r=l.call(arguments,2);return setTimeout(function(){return e.apply(null,r)},t)},g.defer=g.partial(g.delay,g,1),g.throttle=function(e,t,r){var n,i,s,o=null,a=0;r||(r={});var u=function(){a=r.leading===!1?0:g.now(),o=null,s=e.apply(n,i),o||(n=i=null)};return function(){var c=g.now();a||r.leading!==!1||(a=c);var l=t-(c-a);return n=this,i=arguments,l<=0||l>t?(o&&(clearTimeout(o),o=null),a=c,s=e.apply(n,i),o||(n=i=null)):o||r.trailing===!1||(o=setTimeout(u,l)),s}},g.debounce=function(e,t,r){var n,i,s,o,a,u=function(){var c=g.now()-o;c<t&&c>=0?n=setTimeout(u,t-c):(n=null,r||(a=e.apply(s,i),n||(s=i=null)))};return function(){s=this,i=arguments,o=g.now();var c=r&&!n;return n||(n=setTimeout(u,t)),c&&(a=e.apply(s,i),s=i=null),a}},g.wrap=function(e,t){return g.partial(t,e)},g.negate=function(e){return function(){return!e.apply(this,arguments)}},g.compose=function(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}},g.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},g.before=function(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}},g.once=g.partial(g.before,2);var U=!{toString:null}.propertyIsEnumerable("toString"),R=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];g.keys=function(e){if(!g.isObject(e))return[];if(d)return d(e);var t=[];for(var r in e)g.has(e,r)&&t.push(r);return U&&n(e,t),t},g.allKeys=function(e){if(!g.isObject(e))return[];var t=[];for(var r in e)t.push(r);return U&&n(e,t),t},g.values=function(e){for(var t=g.keys(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n},g.mapObject=function(e,t,r){t=b(t,r);for(var n,i=g.keys(e),s=i.length,o={},a=0;a<s;a++)n=i[a],o[n]=t(e[n],n,e);return o},g.pairs=function(e){for(var t=g.keys(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n},g.invert=function(e){for(var t={},r=g.keys(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t},g.functions=g.methods=function(e){var t=[];for(var r in e)g.isFunction(e[r])&&t.push(r);return t.sort()},g.extend=E(g.allKeys),g.extendOwn=g.assign=E(g.keys),g.findKey=function(e,t,r){t=b(t,r);for(var n,i=g.keys(e),s=0,o=i.length;s<o;s++)if(n=i[s],t(e[n],n,e))return n},g.pick=function(e,t,r){var n,i,s={},o=e;if(null==o)return s;g.isFunction(t)?(i=g.allKeys(o),n=y(t,r)):(i=C(arguments,!1,!1,1),n=function(e,t,r){return t in r},o=Object(o));for(var a=0,u=i.length;a<u;a++){var c=i[a],l=o[c];n(l,c,o)&&(s[c]=l)}return s},g.omit=function(e,t,r){if(g.isFunction(t))t=g.negate(t);else{var n=g.map(C(arguments,!1,!1,1),String);t=function(e,t){return!g.contains(n,t)}}return g.pick(e,t,r)},g.defaults=E(g.allKeys,!0),g.create=function(e,t){var r=O(e);return t&&g.extendOwn(r,t),r},g.clone=function(e){return g.isObject(e)?g.isArray(e)?e.slice():g.extend({},e):e},g.tap=function(e,t){return t(e),e},g.isMatch=function(e,t){var r=g.keys(t),n=r.length;if(null==e)return!n;for(var i=Object(e),s=0;s<n;s++){var o=r[s];if(t[o]!==i[o]||!(o in i))return!1}return!0};var I=function(e,t,r,n){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof g&&(e=e._wrapped),t instanceof g&&(t=t._wrapped);var i=h.call(e);if(i!==h.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var s="[object Array]"===i;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,a=t.constructor;if(o!==a&&!(g.isFunction(o)&&o instanceof o&&g.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}r=r||[],n=n||[];for(var u=r.length;u--;)if(r[u]===e)return n[u]===t;if(r.push(e),n.push(t),s){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!I(e[u],t[u],r,n))return!1}else{var c,l=g.keys(e);if(u=l.length,g.keys(t).length!==u)return!1;for(;u--;)if(c=l[u],!g.has(t,c)||!I(e[c],t[c],r,n))return!1}return r.pop(),n.pop(),!0};g.isEqual=function(e,t){return I(e,t)},g.isEmpty=function(e){return null==e||(N(e)&&(g.isArray(e)||g.isString(e)||g.isArguments(e))?0===e.length:0===g.keys(e).length)},g.isElement=function(e){return!(!e||1!==e.nodeType)},g.isArray=_||function(e){return"[object Array]"===h.call(e)},g.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},g.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){g["is"+e]=function(t){return h.call(t)==="[object "+e+"]"}}),g.isArguments(arguments)||(g.isArguments=function(e){return g.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(g.isFunction=function(e){return"function"==typeof e||!1}),g.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},g.isNaN=function(e){return g.isNumber(e)&&e!==+e},g.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===h.call(e)},g.isNull=function(e){return null===e},g.isUndefined=function(e){return void 0===e},g.has=function(e,t){return null!=e&&f.call(e,t)},g.noConflict=function(){return i._=s,this},g.identity=function(e){return e},g.constant=function(e){return function(){return e}},g.noop=function(){},g.property=A,g.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},g.matcher=g.matches=function(e){return e=g.extendOwn({},e),function(t){return g.isMatch(t,e)}},g.times=function(e,t,r){var n=Array(Math.max(0,e));t=y(t,r,1);for(var i=0;i<e;i++)n[i]=t(i);return n},g.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},g.now=Date.now||function(){return(new Date).getTime()};var T={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},k=g.invert(T),D=function(e){var t=function(t){return e[t]},r="(?:"+g.keys(e).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(i,t):e}};g.escape=D(T),g.unescape=D(k),g.result=function(e,t,r){var n=null==e?void 0:e[t];return void 0===n&&(n=r),g.isFunction(n)?n.call(e):n};var x=0;g.uniqueId=function(e){var t=++x+"";return e?e+t:t},g.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\u2028|\u2029/g,K=function(e){return"\\"+L[e]};g.template=function(e,t,r){!t&&r&&(t=r),t=g.defaults({},t,g.templateSettings);var n=RegExp([(t.escape||M).source,(t.interpolate||M).source,(t.evaluate||M).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(n,function(t,r,n,o,a){return s+=e.slice(i,a).replace(F,K),i=a+t.length,r?s+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(t.variable||"obj","_",s)}catch(a){throw a.source=s,a}var u=function(e){return o.call(this,e,g)},c=t.variable||"obj";return u.source="function("+c+"){\n"+s+"}",u},g.chain=function(e){var t=g(e);return t._chain=!0,t};var q=function(e,t){return e._chain?g(t).chain():t};g.mixin=function(e){g.each(g.functions(e),function(t){var r=g[t]=e[t];g.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),q(this,r.apply(g,e))}})},g.mixin(g),g.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];g.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==e&&"splice"!==e||0!==r.length||delete r[0],q(this,r)}}),g.each(["concat","join","slice"],function(e){var t=o[e];g.prototype[e]=function(){return q(this,t.apply(this._wrapped,arguments))}}),g.prototype.value=function(){return this._wrapped},g.prototype.valueOf=g.prototype.toJSON=g.prototype.value,g.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return g})}.call(this)),function(e){e.Parse=e.Parse||{};var t=e.Parse,r="function"==typeof require?require:null;"undefined"!=typeof XMLHttpRequest?t.XMLHttpRequest=XMLHttpRequest:r&&"undefined"==typeof require.ensure&&(t.XMLHttpRequest=r("xmlhttprequest").XMLHttpRequest),"undefined"!=typeof exports&&exports._?(t._=exports._.noConflict(),exports.Parse=t):t._=_.noConflict(),"undefined"!=typeof $&&(t.$=$);var n=function(){},i=function(e,r,i){var s;return s=r&&r.hasOwnProperty("constructor")?r.constructor:function(){e.apply(this,arguments)},t._.extend(s,e),n.prototype=e.prototype,s.prototype=new n,r&&t._.extend(s.prototype,r),i&&t._.extend(s,i),s.prototype.constructor=s,s.__super__=e.prototype,s};t.serverURL="https://api.parse.com","undefined"!=typeof process&&process.versions&&process.versions.node&&(t._isNode=!0),t.initialize=function(e,r,n){if(n)throw new Error("Parse.initialize() was passed a Master Key, which is only allowed from within Node.js.");t._initialize(e,r)},t._initialize=function(e,r,n){t.applicationId=e,t.javaScriptKey=r,t.masterKey=n,t._useMasterKey=!1},t._isNode&&(t.initialize=t._initialize,t.Cloud=t.Cloud||{},t.Cloud.useMasterKey=function(){t._useMasterKey=!0}),t._getParsePath=function(e){if(!t.applicationId)throw new Error("You need to call Parse.initialize before using Parse.");if(e||(e=""),!t._.isString(e))throw new Error("Tried to get a Storage path that wasn't a String.");return"/"===e[0]&&(e=e.substring(1)),"Parse/"+t.applicationId+"/"+e},t._installationId=null,t._getInstallationId=function(){if(t._installationId)return t.Promise.as(t._installationId);var e=t._getParsePath("installationId");return t.Storage.getItemAsync(e).then(function(r){if(t._installationId=r,!t._installationId||""===t._installationId){var n=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return t._installationId=n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n(),t.Storage.setItemAsync(e,t._installationId)}return t.Promise.as(t._installationId)})},t._parseDate=function(e){var t=new RegExp("^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})T([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(.([0-9]+))?Z$"),r=t.exec(e);if(!r)return null;var n=r[1]||0,i=(r[2]||1)-1,s=r[3]||0,o=r[4]||0,a=r[5]||0,u=r[6]||0,c=r[8]||0;return new Date(Date.UTC(n,i,s,o,a,u,c))},t._ajaxIE8=function(e,r,n){var i=new t.Promise,s=new XDomainRequest;return s.onload=function(){var e;try{e=JSON.parse(s.responseText)}catch(t){i.reject(t)}e&&i.resolve(e)},s.onerror=s.ontimeout=function(){var e={responseText:JSON.stringify({code:t.Error.X_DOMAIN_REQUEST,error:"IE's XDomainRequest does not supply error info."})};i.reject(e)},s.onprogress=function(){},s.open(e,r),s.send(n),i},t._useXDomainRequest=function(){return"undefined"!=typeof XDomainRequest&&!("withCredentials"in new XMLHttpRequest)},t._ajax=function(e,r,n,i,s){var o={success:i,error:s};if(t._useXDomainRequest())return t._ajaxIE8(e,r,n)._thenRunCallbacks(o);var a=new t.Promise,u=0,c=function(){var i=!1,s=new t.XMLHttpRequest;s.onreadystatechange=function(){if(4===s.readyState){if(i)return;if(i=!0,s.status>=200&&s.status<300){var e;try{e=JSON.parse(s.responseText)}catch(t){a.reject(t)}e&&a.resolve(e,s.status,s)}else if(s.status>=500)if(++u<5){var r=Math.round(125*Math.random()*Math.pow(2,u));setTimeout(c,r)}else a.reject(s);else a.reject(s)}},s.open(e,r,!0),s.setRequestHeader("Content-Type","text/plain"),t._isNode&&s.setRequestHeader("User-Agent","Parse/"+t.VERSION+" (NodeJS "+process.versions.node+")"),s.send(n)};return c(),a._thenRunCallbacks(o)},t._extend=function(e,t){var r=i(this,e,t);return r.extend=this.extend,r},t._request=function(e){var r=e.route,n=e.className,i=e.objectId,s=e.method,o=e.useMasterKey,a=e.sessionToken,u=e.data;if(!t.applicationId)throw new Error("You must specify your applicationId using Parse.initialize.");if(!t.javaScriptKey&&!t.masterKey)throw new Error("You must specify a key using Parse.initialize.");if("batch"!==r&&"classes"!==r&&"events"!==r&&"files"!==r&&"functions"!==r&&"login"!==r&&"logout"!==r&&"push"!==r&&"requestPasswordReset"!==r&&"rest_verify_analytics"!==r&&"users"!==r&&"jobs"!==r&&"config"!==r&&"sessions"!==r&&"upgradeToRevocableSession"!==r)throw new Error("Bad route: '"+r+"'.");var c=t.serverURL;if("/"!==c.charAt(c.length-1)&&(c+="/"),c+="1/"+r,n&&(c+="/"+n),i&&(c+="/"+i),u=t._.clone(u||{}),"POST"!==s&&(u._method=s,s="POST"),t._.isUndefined(o)&&(o=t._useMasterKey),u._ApplicationId=t.applicationId,o){if(!t.masterKey)throw new Error("Cannot use the Master Key, it has not been provided.");u._MasterKey=t.masterKey}else u._JavaScriptKey=t.javaScriptKey;return u._ClientVersion=t.VERSION,t._getInstallationId().then(function(e){return u._InstallationId=e,a?t.Promise.as({_sessionToken:a}):t.User._canUseCurrentUser()?t.User._currentAsync():t.Promise.as(null)}).then(function(e){e&&e._sessionToken&&(u._SessionToken=e._sessionToken),t.User._isRevocableSessionEnabled&&(u._RevocableSession="1");var r=JSON.stringify(u);return t._ajax(s,c,r)}).then(null,function(e){var r;if(e&&e.responseText)try{var n=JSON.parse(e.responseText);r=new t.Error(n.code,n.error)}catch(i){r=new t.Error(t.Error.INVALID_JSON,"Received an error with invalid JSON from Parse: "+e.responseText)}else r=new t.Error(t.Error.CONNECTION_FAILED,"XMLHttpRequest failed: "+JSON.stringify(e));return t.Promise.error(r)})},t._getValue=function(e,r){return e&&e[r]?t._.isFunction(e[r])?e[r]():e[r]:null},t._encode=function(e,r,n){var i=t._;if(e instanceof t.Object){if(n)throw new Error("Parse.Objects not allowed here");if(!r||i.include(r,e)||!e._hasData)return e._toPointer();if(!e.dirty())return r=r.concat(e),t._encode(e._toFullJSON(r),r,n);throw new Error("Tried to save an object with a pointer to a new, unsaved object.")}if(e instanceof t.ACL)return e.toJSON();if(i.isDate(e)){if(isNaN(e))throw new Error("Cannot encode invalid Date");return{__type:"Date",iso:e.toJSON()}}if(e instanceof t.GeoPoint)return e.toJSON();if(i.isArray(e))return i.map(e,function(e){return t._encode(e,r,n)});if(i.isRegExp(e))return e.source;if(e instanceof t.Relation)return e.toJSON();if(e instanceof t.Op)return e.toJSON();if(e instanceof t.File){if(!e.url())throw new Error("Tried to save an object containing an unsaved file.");return{__type:"File",name:e.name(),url:e.url()}}if(i.isObject(e)){var s={};return t._objectEach(e,function(e,i){s[i]=t._encode(e,r,n)}),s}return e},t._decode=function(e,r){var n=t._;if(!n.isObject(r))return r;if(n.isArray(r))return t._arrayEach(r,function(e,n){r[n]=t._decode(n,e)}),r;if(r instanceof t.Object)return r;if(r instanceof t.File)return r;if(r instanceof t.Op)return r;if(r.__op)return t.Op._decode(r);if("Pointer"===r.__type&&r.className){var i=t.Object._create(r.className);return i._finishFetch({objectId:r.objectId},!1),i}if("Object"===r.__type&&r.className){var s=r.className;delete r.__type,delete r.className;var o=t.Object._create(s);return o._finishFetch(r,!0),o}if("Date"===r.__type)return t._parseDate(r.iso);if("GeoPoint"===r.__type)return new t.GeoPoint({latitude:r.latitude,longitude:r.longitude});if("ACL"===e)return r instanceof t.ACL?r:new t.ACL(r);if("Relation"===r.__type){var a=new t.Relation(null,e);return a.targetClassName=r.className,a}if("File"===r.__type){var u=new t.File(r.name);return u._url=r.url,u}return t._objectEach(r,function(e,n){r[n]=t._decode(n,e)}),r},t._arrayEach=t._.each,t._traverse=function(e,r,n){if(e instanceof t.Object){if(n=n||[],t._.indexOf(n,e)>=0)return;return n.push(e),t._traverse(e.attributes,r,n),r(e)}return e instanceof t.Relation||e instanceof t.File?r(e):t._.isArray(e)?(t._.each(e,function(i,s){var o=t._traverse(i,r,n);o&&(e[s]=o)}),r(e)):t._.isObject(e)?(t._each(e,function(i,s){var o=t._traverse(i,r,n);o&&(e[s]=o)}),r(e)):r(e)},t._objectEach=t._each=function(e,r){var n=t._;n.isObject(e)?n.each(n.keys(e),function(t){r(e[t],t)}):n.each(e,r)},t._isNullOrUndefined=function(e){return t._.isNull(e)||t._.isUndefined(e)}}(this),function(e){e.Parse=e.Parse||{};var t=e.Parse,r={async:!1},n="undefined"!=typeof localStorage;if(n)try{localStorage.setItem("supported",!0),localStorage.removeItem("supported")}catch(i){n=!1}if(n)r.getItem=function(e){return localStorage.getItem(e)},r.setItem=function(e,t){return localStorage.setItem(e,t)},r.removeItem=function(e){return localStorage.removeItem(e)},r.clear=function(){return localStorage.clear()};else if("function"==typeof require&&"undefined"==typeof require.ensure){var s;try{s=require("AsyncStorage"),r.async=!0,r.getItemAsync=function(e){var r=new t.Promise;return s.getItem(e,function(e,t){e?r.reject(e):r.resolve(t)}),r},r.setItemAsync=function(e,r){var n=new t.Promise;return s.setItem(e,r,function(e){e?n.reject(e):n.resolve(r)}),n},r.removeItemAsync=function(e){var r=new t.Promise;return s.removeItem(e,function(e){e?r.reject(e):r.resolve()}),r},r.clear=function(){s.clear()}}catch(i){}}if(!r.async&&!r.getItem){var o=r.inMemoryMap={};r.getItem=function(e){return o.hasOwnProperty(e)?o[e]:null},r.setItem=function(e,t){o[e]=String(t)},r.removeItem=function(e){delete o[e]},r.clear=function(){for(var e in o)o.hasOwnProperty(e)&&delete o[e]}}r.async||(r.getItemAsync=function(e){return t.Promise.as(r.getItem(e))},r.setItemAsync=function(e,n){return r.setItem(e,n),t.Promise.as(n)},r.removeItemAsync=function(e){return t.Promise.as(r.removeItem(e))}),t.Storage=r}(this),function(e){e.Parse=e.Parse||{};var t=e.Parse,r=t._;t.Analytics=t.Analytics||{},r.extend(t.Analytics,{track:function(e,n,i){if(e=e||"",e=e.replace(/^\s*/,""),e=e.replace(/\s*$/,""),0===e.length)throw new Error("A name for the custom event must be provided");return r.each(n,function(e,t){if(!r.isString(t)||!r.isString(e))throw new Error('track() dimensions expects keys and values of type "string".')}),i=i||{},t._request({route:"events",className:e,method:"POST",data:{dimensions:n}})._thenRunCallbacks(i)}})}(this),function(e){e.Parse=e.Parse||{};var t=e.Parse,r=t._;t.Config=function(){this.attributes={},this._escapedAttributes={}},t.Config.current=function(){if(t.Config._currentConfig)return t.Config._currentConfig;var e=new t.Config;if(t.Storage.async)return e;var r=t.Storage.getItem(t._getParsePath(t.Config._CURRENT_CONFIG_KEY));return r&&(e._finishFetch(JSON.parse(r)),t.Config._currentConfig=e),e},t.Config.get=function(e){e=e||{};var r=t._request({route:"config",method:"GET"});return r.then(function(e){if(!e||!e.params){var r=new t.Error(t.Error.INVALID_JSON,"Config JSON response invalid.");return t.Promise.error(r)}var n=new t.Config;return n._finishFetch(e),t.Config._currentConfig=n,n})._thenRunCallbacks(e)},t.Config.prototype={escape:function(e){var n=this._escapedAttributes[e];if(n)return n;var i,s=this.attributes[e];return i=t._isNullOrUndefined(s)?"":r.escape(s.toString()),this._escapedAttributes[e]=i,i},get:function(e){return this.attributes[e]},_finishFetch:function(e){this.attributes=t._decode(null,r.clone(e.params)),t.Storage.async||t.Storage.setItem(t._getParsePath(t.Config._CURRENT_CONFIG_KEY),JSON.stringify(e))}},t.Config._currentConfig=null,t.Config._CURRENT_CONFIG_KEY="currentConfig"}(this),function(e){e.Parse=e.Parse||{};var t=e.Parse,r=t._;t.Error=function(e,t){this.code=e,this.message=t},r.extend(t.Error,{OTHER_CAUSE:-1,INTERNAL_SERVER_ERROR:1,CONNECTION_FAILED:100,OBJECT_NOT_FOUND:101,INVALID_QUERY:102,INVALID_CLASS_NAME:103,MISSING_OBJECT_ID:104,INVALID_KEY_NAME:105,INVALID_POINTER:106,INVALID_JSON:107,COMMAND_UNAVAILABLE:108,NOT_INITIALIZED:109,INCORRECT_TYPE:111,INVALID_CHANNEL_NAME:112,PUSH_MISCONFIGURED:115,OBJECT_TOO_LARGE:116,OPERATION_FORBIDDEN:119,CACHE_MISS:120,INVALID_NESTED_KEY:121,INVALID_FILE_NAME:122,INVALID_ACL:123,TIMEOUT:124,INVALID_EMAIL_ADDRESS:125,MISSING_CONTENT_TYPE:126,MISSING_CONTENT_LENGTH:127,INVALID_CONTENT_LENGTH:128,FILE_TOO_LARGE:129,FILE_SAVE_ERROR:130,DUPLICATE_VALUE:137,INVALID_ROLE_NAME:139,EXCEEDED_QUOTA:140,SCRIPT_FAILED:141,VALIDATION_ERROR:142,INVALID_IMAGE_DATA:150,UNSAVED_FILE_ERROR:151,INVALID_PUSH_TIME_ERROR:152,FILE_DELETE_ERROR:153,REQUEST_LIMIT_EXCEEDED:155,INVALID_EVENT_NAME:160,USERNAME_MISSING:200,PASSWORD_MISSING:201,USERNAME_TAKEN:202,EMAIL_TAKEN:203,EMAIL_MISSING:204,EMAIL_NOT_FOUND:205,SESSION_MISSING:206,MUST_CREATE_USER_THROUGH_SIGNUP:207,ACCOUNT_ALREADY_LINKED:208,INVALID_SESSION_TOKEN:209,LINKED_ID_MISSING:250,INVALID_LINKED_SESSION:251,UNSUPPORTED_SERVICE:252,AGGREGATE_ERROR:600,FILE_READ_ERROR:601,X_DOMAIN_REQUEST:602})}(this),function(){var e=this,t=e.Parse||(e.Parse={}),r=/\s+/,n=Array.prototype.slice;t.Events={on:function(e,t,n){var i,s,o,a,u;if(!t)return this;for(e=e.split(r),i=this._callbacks||(this._callbacks={}),s=e.shift();s;)u=i[s],o=u?u.tail:{},o.next=a={},o.context=n,o.callback=t,i[s]={tail:a,next:u?u.next:o},s=e.shift();return this},off:function(e,t,n){var i,s,o,a,u,c;if(s=this._callbacks){if(!(e||t||n))return delete this._callbacks,this;for(e=e?e.split(r):Object.keys(s),i=e.shift();i;)if(o=s[i],delete s[i],o&&(t||n)){for(a=o.tail,o=o.next;o!==a;)u=o.callback,c=o.context,(t&&u!==t||n&&c!==n)&&this.on(i,u,c),o=o.next;i=e.shift()}else i=e.shift();return this}},trigger:function(e){var t,i,s,o,a,u,c;if(!(s=this._callbacks))return this;for(u=s.all,e=e.split(r),c=n.call(arguments,1),t=e.shift();t;){if(i=s[t])for(o=i.tail;(i=i.next)!==o;)i.callback.apply(i.context||this,c);if(i=u)for(o=i.tail,a=[t].concat(c);(i=i.next)!==o;)i.callback.apply(i.context||this,a);t=e.shift()}return this}},t.Events.bind=t.Events.on,t.Events.unbind=t.Events.off}.call(this),function(e){e.Parse=e.Parse||{};var t=e.Parse,r=t._;t.GeoPoint=function(e,n){r.isArray(e)?(t.GeoPoint._validate(e[0],e[1]),this.latitude=e[0],this.longitude=e[1]):r.isObject(e)?(t.GeoPoint._validate(e.latitude,e.longitude),this.latitude=e.latitude,this.longitude=e.longitude):r.isNumber(e)&&r.isNumber(n)?(t.GeoPoint._validate(e,n),this.latitude=e,this.longitude=n):(this.latitude=0,this.longitude=0);var i=this;this.__defineGetter__&&this.__defineSetter__&&(this._latitude=this.latitude,this._longitude=this.longitude,this.__defineGetter__("latitude",function(){return i._latitude}),this.__defineGetter__("longitude",function(){return i._longitude}),this.__defineSetter__("latitude",function(e){t.GeoPoint._validate(e,i.longitude),i._latitude=e}),this.__defineSetter__("longitude",function(e){t.GeoPoint._validate(i.latitude,e),i._longitude=e}))},t.GeoPoint._validate=function(e,t){if(e<-90)throw new Error("Parse.GeoPoint latitude "+e+" < -90.0.");if(e>90)throw new Error("Parse.GeoPoint latitude "+e+" > 90.0.");if(t<-180)throw new Error("Parse.GeoPoint longitude "+t+" < -180.0.");if(t>180)throw new Error("Parse.GeoPoint longitude "+t+" > 180.0.")},t.GeoPoint.current=function(e){var r=new t.Promise;return navigator.geolocation.getCurrentPosition(function(e){r.resolve(new t.GeoPoint({latitude:e.coords.latitude,longitude:e.coords.longitude}))},function(e){r.reject(e)}),r._thenRunCallbacks(e)},t.GeoPoint.prototype={toJSON:function(){return t.GeoPoint._validate(this.latitude,this.longitude),{__type:"GeoPoint",latitude:this.latitude,longitude:this.longitude}},radiansTo:function(e){var t=Math.PI/180,r=this.latitude*t,n=this.longitude*t,i=e.latitude*t,s=e.longitude*t,o=r-i,a=n-s,u=Math.sin(o/2),c=Math.sin(a/2),l=u*u+Math.cos(r)*Math.cos(i)*c*c;return l=Math.min(1,l),2*Math.asin(Math.sqrt(l))},kilometersTo:function(e){return 6371*this.radiansTo(e)},milesTo:function(e){return 3958.8*this.radiansTo(e)}}}(this),function(e){e.Parse=e.Parse||{};var t=e.Parse,r=t._,n="*";t.ACL=function(e){var n=this;if(n.permissionsById={},r.isObject(e))if(e instanceof t.User)n.setReadAccess(e,!0),n.setWriteAccess(e,!0);else{if(r.isFunction(e))throw new Error("Parse.ACL() called with a function.  Did you forget ()?");t._objectEach(e,function(e,i){if(!r.isString(i))throw new Error("Tried to create an ACL with an invalid userId.");n.permissionsById[i]={},
t._objectEach(e,function(e,t){if("read"!==t&&"write"!==t)throw new Error("Tried to create an ACL with an invalid permission type.");if(!r.isBoolean(e))throw new Error("Tried to create an ACL with an invalid permission value.");n.permissionsById[i][t]=e})})}},t.ACL.prototype.toJSON=function(){return r.clone(this.permissionsById)},t.ACL.prototype._setAccess=function(e,n,i){if(n instanceof t.User?n=n.id:n instanceof t.Role&&(n="role:"+n.getName()),!r.isString(n))throw new Error("userId must be a string.");if(!r.isBoolean(i))throw new Error("allowed must be either true or false.");var s=this.permissionsById[n];if(!s){if(!i)return;s={},this.permissionsById[n]=s}i?this.permissionsById[n][e]=!0:(delete s[e],r.isEmpty(s)&&delete s[n])},t.ACL.prototype._getAccess=function(e,r){r instanceof t.User?r=r.id:r instanceof t.Role&&(r="role:"+r.getName());var n=this.permissionsById[r];return!!n&&!!n[e]},t.ACL.prototype.setReadAccess=function(e,t){this._setAccess("read",e,t)},t.ACL.prototype.getReadAccess=function(e){return this._getAccess("read",e)},t.ACL.prototype.setWriteAccess=function(e,t){this._setAccess("write",e,t)},t.ACL.prototype.getWriteAccess=function(e){return this._getAccess("write",e)},t.ACL.prototype.setPublicReadAccess=function(e){this.setReadAccess(n,e)},t.ACL.prototype.getPublicReadAccess=function(){return this.getReadAccess(n)},t.ACL.prototype.setPublicWriteAccess=function(e){this.setWriteAccess(n,e)},t.ACL.prototype.getPublicWriteAccess=function(){return this.getWriteAccess(n)},t.ACL.prototype.getRoleReadAccess=function(e){if(e instanceof t.Role&&(e=e.getName()),r.isString(e))return this.getReadAccess("role:"+e);throw new Error("role must be a Parse.Role or a String")},t.ACL.prototype.getRoleWriteAccess=function(e){if(e instanceof t.Role&&(e=e.getName()),r.isString(e))return this.getWriteAccess("role:"+e);throw new Error("role must be a Parse.Role or a String")},t.ACL.prototype.setRoleReadAccess=function(e,n){if(e instanceof t.Role&&(e=e.getName()),r.isString(e))return void this.setReadAccess("role:"+e,n);throw new Error("role must be a Parse.Role or a String")},t.ACL.prototype.setRoleWriteAccess=function(e,n){if(e instanceof t.Role&&(e=e.getName()),r.isString(e))return void this.setWriteAccess("role:"+e,n);throw new Error("role must be a Parse.Role or a String")}}(this),function(e){e.Parse=e.Parse||{};var t=e.Parse,r=t._;t.Op=function(){this._initialize.apply(this,arguments)},t.Op.prototype={_initialize:function(){}},r.extend(t.Op,{_extend:t._extend,_opDecoderMap:{},_registerDecoder:function(e,r){t.Op._opDecoderMap[e]=r},_decode:function(e){var r=t.Op._opDecoderMap[e.__op];return r?r(e):void 0}}),t.Op._registerDecoder("Batch",function(e){var r=null;return t._arrayEach(e.ops,function(e){e=t.Op._decode(e),r=e._mergeWithPrevious(r)}),r}),t.Op.Set=t.Op._extend({_initialize:function(e){this._value=e},value:function(){return this._value},toJSON:function(){return t._encode(this.value())},_mergeWithPrevious:function(e){return this},_estimate:function(e){return this.value()}}),t.Op._UNSET={},t.Op.Unset=t.Op._extend({toJSON:function(){return{__op:"Delete"}},_mergeWithPrevious:function(e){return this},_estimate:function(e){return t.Op._UNSET}}),t.Op._registerDecoder("Delete",function(e){return new t.Op.Unset}),t.Op.Increment=t.Op._extend({_initialize:function(e){this._amount=e},amount:function(){return this._amount},toJSON:function(){return{__op:"Increment",amount:this._amount}},_mergeWithPrevious:function(e){if(e){if(e instanceof t.Op.Unset)return new t.Op.Set(this.amount());if(e instanceof t.Op.Set)return new t.Op.Set(e.value()+this.amount());if(e instanceof t.Op.Increment)return new t.Op.Increment(this.amount()+e.amount());throw new Error("Op is invalid after previous op.")}return this},_estimate:function(e){return e?e+this.amount():this.amount()}}),t.Op._registerDecoder("Increment",function(e){return new t.Op.Increment(e.amount)}),t.Op.Add=t.Op._extend({_initialize:function(e){this._objects=e},objects:function(){return this._objects},toJSON:function(){return{__op:"Add",objects:t._encode(this.objects())}},_mergeWithPrevious:function(e){if(e){if(e instanceof t.Op.Unset)return new t.Op.Set(this.objects());if(e instanceof t.Op.Set)return new t.Op.Set(this._estimate(e.value()));if(e instanceof t.Op.Add)return new t.Op.Add(e.objects().concat(this.objects()));throw new Error("Op is invalid after previous op.")}return this},_estimate:function(e){return e?e.concat(this.objects()):r.clone(this.objects())}}),t.Op._registerDecoder("Add",function(e){return new t.Op.Add(t._decode(void 0,e.objects))}),t.Op.AddUnique=t.Op._extend({_initialize:function(e){this._objects=r.uniq(e)},objects:function(){return this._objects},toJSON:function(){return{__op:"AddUnique",objects:t._encode(this.objects())}},_mergeWithPrevious:function(e){if(e){if(e instanceof t.Op.Unset)return new t.Op.Set(this.objects());if(e instanceof t.Op.Set)return new t.Op.Set(this._estimate(e.value()));if(e instanceof t.Op.AddUnique)return new t.Op.AddUnique(this._estimate(e.objects()));throw new Error("Op is invalid after previous op.")}return this},_estimate:function(e){if(e){var n=r.clone(e);return t._arrayEach(this.objects(),function(e){if(e instanceof t.Object&&e.id){var i=r.find(n,function(r){return r instanceof t.Object&&r.id===e.id});if(i){var s=r.indexOf(n,i);n[s]=e}else n.push(e)}else r.contains(n,e)||n.push(e)}),n}return r.clone(this.objects())}}),t.Op._registerDecoder("AddUnique",function(e){return new t.Op.AddUnique(t._decode(void 0,e.objects))}),t.Op.Remove=t.Op._extend({_initialize:function(e){this._objects=r.uniq(e)},objects:function(){return this._objects},toJSON:function(){return{__op:"Remove",objects:t._encode(this.objects())}},_mergeWithPrevious:function(e){if(e){if(e instanceof t.Op.Unset)return e;if(e instanceof t.Op.Set)return new t.Op.Set(this._estimate(e.value()));if(e instanceof t.Op.Remove)return new t.Op.Remove(r.union(e.objects(),this.objects()));throw new Error("Op is invalid after previous op.")}return this},_estimate:function(e){if(e){var n=r.difference(e,this.objects());return t._arrayEach(this.objects(),function(e){e instanceof t.Object&&e.id&&(n=r.reject(n,function(r){return r instanceof t.Object&&r.id===e.id}))}),n}return[]}}),t.Op._registerDecoder("Remove",function(e){return new t.Op.Remove(t._decode(void 0,e.objects))}),t.Op.Relation=t.Op._extend({_initialize:function(e,n){this._targetClassName=null;var i=this,s=function(e){if(e instanceof t.Object){if(!e.id)throw new Error("You can't add an unsaved Parse.Object to a relation.");if(i._targetClassName||(i._targetClassName=e.className),i._targetClassName!==e.className)throw new Error("Tried to create a Parse.Relation with 2 different types: "+i._targetClassName+" and "+e.className+".");return e.id}return e};this.relationsToAdd=r.uniq(r.map(e,s)),this.relationsToRemove=r.uniq(r.map(n,s))},added:function(){var e=this;return r.map(this.relationsToAdd,function(r){var n=t.Object._create(e._targetClassName);return n.id=r,n})},removed:function(){var e=this;return r.map(this.relationsToRemove,function(r){var n=t.Object._create(e._targetClassName);return n.id=r,n})},toJSON:function(){var e=null,t=null,n=this,i=function(e){return{__type:"Pointer",className:n._targetClassName,objectId:e}},s=null;return this.relationsToAdd.length>0&&(s=r.map(this.relationsToAdd,i),e={__op:"AddRelation",objects:s}),this.relationsToRemove.length>0&&(s=r.map(this.relationsToRemove,i),t={__op:"RemoveRelation",objects:s}),e&&t?{__op:"Batch",ops:[e,t]}:e||t||{}},_mergeWithPrevious:function(e){if(e){if(e instanceof t.Op.Unset)throw new Error("You can't modify a relation after deleting it.");if(e instanceof t.Op.Relation){if(e._targetClassName&&e._targetClassName!==this._targetClassName)throw new Error("Related object must be of class "+e._targetClassName+", but "+this._targetClassName+" was passed in.");var n=r.union(r.difference(e.relationsToAdd,this.relationsToRemove),this.relationsToAdd),i=r.union(r.difference(e.relationsToRemove,this.relationsToAdd),this.relationsToRemove),s=new t.Op.Relation(n,i);return s._targetClassName=this._targetClassName,s}throw new Error("Op is invalid after previous op.")}return this},_estimate:function(e,r,n){if(e){if(e instanceof t.Relation){if(this._targetClassName)if(e.targetClassName){if(e.targetClassName!==this._targetClassName)throw new Error("Related object must be a "+e.targetClassName+", but a "+this._targetClassName+" was passed in.")}else e.targetClassName=this._targetClassName;return e}throw new Error("Op is invalid after previous op.")}var i=new t.Relation(r,n);i.targetClassName=this._targetClassName}}),t.Op._registerDecoder("AddRelation",function(e){return new t.Op.Relation(t._decode(void 0,e.objects),[])}),t.Op._registerDecoder("RemoveRelation",function(e){return new t.Op.Relation([],t._decode(void 0,e.objects))})}(this),function(e){e.Parse=e.Parse||{};var t=e.Parse,r=t._;t.Relation=function(e,t){this.parent=e,this.key=t,this.targetClassName=null},t.Relation.prototype={_ensureParentAndKey:function(e,t){if(this.parent=this.parent||e,this.key=this.key||t,this.parent!==e)throw new Error("Internal Error. Relation retrieved from two different Objects.");if(this.key!==t)throw new Error("Internal Error. Relation retrieved from two different keys.")},add:function(e){r.isArray(e)||(e=[e]);var n=new t.Op.Relation(e,[]);this.parent.set(this.key,n),this.targetClassName=n._targetClassName},remove:function(e){r.isArray(e)||(e=[e]);var n=new t.Op.Relation([],e);this.parent.set(this.key,n),this.targetClassName=n._targetClassName},toJSON:function(){return{__type:"Relation",className:this.targetClassName}},query:function(){var e,r;return this.targetClassName?(e=t.Object._getSubclass(this.targetClassName),r=new t.Query(e)):(e=t.Object._getSubclass(this.parent.className),r=new t.Query(e),r._extraOptions.redirectClassNameForKey=this.key),r._addCondition("$relatedTo","object",this.parent._toPointer()),r._addCondition("$relatedTo","key",this.key),r}}}(this),function(e){e.Parse=e.Parse||{};var t=e.Parse,r=t._;t.Promise=function(){this._resolved=!1,this._rejected=!1,this._resolvedCallbacks=[],this._rejectedCallbacks=[]},r.extend(t.Promise,{_isPromisesAPlusCompliant:!1,is:function(e){return e&&e.then&&r.isFunction(e.then)},as:function(){var e=new t.Promise;return e.resolve.apply(e,arguments),e},error:function(){var e=new t.Promise;return e.reject.apply(e,arguments),e},when:function(e){var r;r=e&&t._isNullOrUndefined(e.length)?arguments:e;var n=r.length,i=!1,s=[],o=[];if(s.length=r.length,o.length=r.length,0===n)return t.Promise.as.apply(this,s);var a=new t.Promise,u=function(){n-=1,0===n&&(i?a.reject(o):a.resolve.apply(a,s))};return t._arrayEach(r,function(e,r){t.Promise.is(e)?e.then(function(e){s[r]=e,u()},function(e){o[r]=e,i=!0,u()}):(s[r]=e,u())}),a},_continueWhile:function(e,r){return e()?r().then(function(){return t.Promise._continueWhile(e,r)}):t.Promise.as()}}),r.extend(t.Promise.prototype,{resolve:function(e){if(this._resolved||this._rejected)throw new Error("A promise was resolved even though it had already been "+(this._resolved?"resolved":"rejected")+".");this._resolved=!0,this._result=arguments;var r=arguments;t._arrayEach(this._resolvedCallbacks,function(e){e.apply(this,r)}),this._resolvedCallbacks=[],this._rejectedCallbacks=[]},reject:function(e){if(this._resolved||this._rejected)throw new Error("A promise was rejected even though it had already been "+(this._resolved?"resolved":"rejected")+".");this._rejected=!0,this._error=e,t._arrayEach(this._rejectedCallbacks,function(t){t(e)}),this._resolvedCallbacks=[],this._rejectedCallbacks=[]},then:function(e,r){var n=new t.Promise,i=function(){var r=arguments;if(e)if(t.Promise._isPromisesAPlusCompliant)try{r=[e.apply(this,r)]}catch(i){r=[t.Promise.error(i)]}else r=[e.apply(this,r)];1===r.length&&t.Promise.is(r[0])?r[0].then(function(){n.resolve.apply(n,arguments)},function(e){n.reject(e)}):n.resolve.apply(n,r)},s=function(e){var i=[];if(r){if(t.Promise._isPromisesAPlusCompliant)try{i=[r(e)]}catch(s){i=[t.Promise.error(s)]}else i=[r(e)];1===i.length&&t.Promise.is(i[0])?i[0].then(function(){n.resolve.apply(n,arguments)},function(e){n.reject(e)}):t.Promise._isPromisesAPlusCompliant?n.resolve.apply(n,i):n.reject(i[0])}else n.reject(e)},o=function(e){e.call()};t.Promise._isPromisesAPlusCompliant&&("undefined"!=typeof window&&window.setTimeout?o=function(e){window.setTimeout(e,0)}:"undefined"!=typeof process&&process.nextTick&&(o=function(e){process.nextTick(e)}));var a=this;return this._resolved?o(function(){i.apply(a,a._result)}):this._rejected?o(function(){s(a._error)}):(this._resolvedCallbacks.push(i),this._rejectedCallbacks.push(s)),n},always:function(e){return this.then(e,e)},done:function(e){return this.then(e)},fail:function(e){return this.then(null,e)},_thenRunCallbacks:function(e,n){var i;if(r.isFunction(e)){var s=e;i={success:function(e){s(e,null)},error:function(e){s(null,e)}}}else i=r.clone(e);return i=i||{},this.then(function(e){return i.success?i.success.apply(this,arguments):n&&n.trigger("sync",n,e,i),t.Promise.as.apply(t.Promise,arguments)},function(e){return i.error?r.isUndefined(n)?i.error(e):i.error(n,e):n&&n.trigger("error",n,e,i),t.Promise.error(e)})},_continueWith:function(e){return this.then(function(){return e(arguments,null)},function(t){return e(null,t)})}})}(this),function(e){e.Parse=e.Parse||{};var t=e.Parse,r=t._,n=function(e){if(e<26)return String.fromCharCode(65+e);if(e<52)return String.fromCharCode(97+(e-26));if(e<62)return String.fromCharCode(48+(e-52));if(62===e)return"+";if(63===e)return"/";throw new Error("Tried to encode large digit "+e+" in base64.")},i=function(e){var t=[];return t.length=Math.ceil(e.length/3),r.times(t.length,function(r){var i=e[3*r],s=e[3*r+1]||0,o=e[3*r+2]||0,a=3*r+1<e.length,u=3*r+2<e.length;t[r]=[n(i>>2&63),n(i<<4&48|s>>4&15),a?n(s<<2&60|o>>6&3):"=",u?n(63&o):"="].join("")}),t.join("")},s=function(e,r){var n=new t.Promise;if("undefined"==typeof FileReader)return t.Promise.error(new t.Error(t.Error.FILE_READ_ERROR,"Attempted to use a FileReader on an unsupported browser."));var i=new FileReader;return i.onloadend=function(){if(2!==i.readyState)return void n.reject(new t.Error(t.Error.FILE_READ_ERROR,"Error reading file."));var e=i.result,s=/^data:([^;]*);base64,(.*)$/.exec(e);return s?void n.resolve(s[2],r||s[1]):void n.reject(new t.Error(t.Error.FILE_READ_ERROR,"Unable to interpret data URL: "+e))},i.readAsDataURL(e),n};t.File=function(e,n,o){this._name=e;var a=/\.([^.]*)$/.exec(e);a&&(a=a[1].toLowerCase());var u=o||"";if(r.isArray(n))this._source=t.Promise.as(i(n),u);else if(n&&n.base64){var c=/^data:([a-zA-Z]*\/[a-zA-Z+.-]*);(charset=[a-zA-Z0-9\-\/\s]*,)?base64,(\S+)/,l=c.exec(n.base64);l&&l.length>0?this._source=t.Promise.as(4===l.length?l[3]:l[2],l[1]):this._source=t.Promise.as(n.base64,u)}else if("undefined"!=typeof File&&n instanceof File)this._source=s(n,o);else if(r.isString(n))throw new Error("Creating a Parse.File from a String is not yet supported.")},t.File.prototype={name:function(){return this._name},url:function(){return this._url},save:function(e){e=e||{};var r=this;return r._previousSave||(r._previousSave=r._source.then(function(n,i){var s={base64:n,_ContentType:i};return t._request({route:"files",className:r._name,method:"POST",data:s,useMasterKey:e.useMasterKey})}).then(function(e){return r._name=e.name,r._url=e.url,r})),r._previousSave._thenRunCallbacks(e)}}}(this),function(e){e.Parse=e.Parse||{};var t=e.Parse,r=t._;t.Object=function(e,n){if(r.isString(e))return t.Object._create.apply(this,arguments);e=e||{},n&&n.parse&&(e=this.parse(e));var i=t._getValue(this,"defaults");if(i&&(e=r.extend({},i,e)),n&&n.collection&&(this.collection=n.collection),this._serverData={},this._opSetQueue=[{}],this.attributes={},this._hashedJSON={},this._escapedAttributes={},this.cid=r.uniqueId("c"),this.changed={},this._silent={},this._pending={},!this.set(e,{silent:!0}))throw new Error("Can't create an invalid Parse.Object");this.changed={},this._silent={},this._pending={},this._hasData=!0,this._previousAttributes=r.clone(this.attributes),this.initialize.apply(this,arguments)},t.Object.saveAll=function(e,r){return r=r||{},t.Object._deepSaveAsync(e,{useMasterKey:r.useMasterKey,sessionToken:r.sessionToken})._thenRunCallbacks(r)},t.Object.destroyAll=function(e,n){n=n||{};var i=function(e){e.trigger("destroy",e,e.collection,n)},s=[],o=function(e){var o=t.Promise.as();return e.length>0&&(o=o.then(function(){return t._request({route:"batch",method:"POST",useMasterKey:n.useMasterKey,sessionToken:n.sessionToken,data:{requests:r.map(e,function(e){return{method:"DELETE",path:"/1/classes/"+e.className+"/"+e.id}})}})}).then(function(r,o,a){t._arrayEach(e,function(e,o){if(r[o].success&&n.wait)i(e);else if(r[o].error){var a=new t.Error(r[o].error.code,r[o].error.error);a.object=e,s.push(a)}})})),o},a=t.Promise.as(),u=[];return t._arrayEach(e,function(t,r){if(t.id&&n.wait||i(t),t.id&&u.push(t),20===u.length||r+1===e.length){var s=u;u=[],a=a.then(function(){return o(s)})}}),a.then(function(){if(0===s.length)return!0;var e=new t.Error(t.Error.AGGREGATE_ERROR,"Error deleting an object in destroyAll");return e.errors=s,t.Promise.error(e)})._thenRunCallbacks(n)},t.Object.fetchAll=function(e,r){return t.Object._fetchAll(e,!0)._thenRunCallbacks(r)},t.Object.fetchAllIfNeeded=function(e,r){return t.Object._fetchAll(e,!1)._thenRunCallbacks(r)},r.extend(t.Object.prototype,t.Events,{_existed:!1,initialize:function(){},toJSON:function(){var e=this._toFullJSON();return t._arrayEach(["__type","className"],function(t){delete e[t]}),e},_toFullJSON:function(e){var n=r.clone(this.attributes);return t._objectEach(n,function(r,i){n[i]=t._encode(r,e)}),t._objectEach(this._operations,function(e,t){n[t]=e}),r.has(this,"id")&&(n.objectId=this.id),r.has(this,"createdAt")&&(r.isDate(this.createdAt)?n.createdAt=this.createdAt.toJSON():n.createdAt=this.createdAt),r.has(this,"updatedAt")&&(r.isDate(this.updatedAt)?n.updatedAt=this.updatedAt.toJSON():n.updatedAt=this.updatedAt),n.__type="Object",n.className=this.className,n},_refreshCache:function(){var e=this;e._refreshingCache||(e._refreshingCache=!0,t._objectEach(this.attributes,function(n,i){if(n instanceof t.Object)n._refreshCache();else if(r.isObject(n)){var s=!1;r.isArray(n)&&r.each(n,function(e){e instanceof t.Object&&(s=!0,e._refreshCache())}),!s&&e._resetCacheForKey(i)&&e.set(i,new t.Op.Set(n),{silent:!0})}}),delete e._refreshingCache)},dirty:function(e){this._refreshCache();var t=r.last(this._opSetQueue);return e?!!t[e]:!this.id||r.keys(t).length>0},dirtyKeys:function(){return r.keys(r.last(this._opSetQueue))},_toPointer:function(){if(!this.id)throw new Error("Can't serialize an unsaved Parse.Object");return{__type:"Pointer",className:this.className,objectId:this.id}},get:function(e){return this.attributes[e]},relation:function(e){var r=this.get(e);if(r){if(!(r instanceof t.Relation))throw new Error("Called relation() on non-relation field "+e);return r._ensureParentAndKey(this,e),r}return new t.Relation(this,e)},escape:function(e){var n=this._escapedAttributes[e];if(n)return n;var i,s=this.attributes[e];return i=t._isNullOrUndefined(s)?"":r.escape(s.toString()),this._escapedAttributes[e]=i,i},has:function(e){return!t._isNullOrUndefined(this.attributes[e])},_mergeMagicFields:function(e){var n=this,i=["id","objectId","createdAt","updatedAt"];t._arrayEach(i,function(i){e[i]&&("objectId"===i?n.id=e[i]:"createdAt"!==i&&"updatedAt"!==i||r.isDate(e[i])?n[i]=e[i]:n[i]=t._parseDate(e[i]),delete e[i])})},_copyServerData:function(e){var r={};t._objectEach(e,function(e,n){r[n]=t._decode(n,e)}),this._serverData=r,this._rebuildAllEstimatedData(),this._refreshCache(),this._opSetQueue=[{}],this._rebuildAllEstimatedData()},_mergeFromObject:function(e){e&&(this.id=e.id,this.createdAt=e.createdAt,this.updatedAt=e.updatedAt,this._copyServerData(e._serverData),this._hasData=!0)},_startSave:function(){this._opSetQueue.push({})},_cancelSave:function(){var e=r.first(this._opSetQueue);this._opSetQueue=r.rest(this._opSetQueue);var n=r.first(this._opSetQueue);t._objectEach(e,function(t,r){var i=e[r],s=n[r];i&&s?n[r]=s._mergeWithPrevious(i):i&&(n[r]=i)}),this._saving=this._saving-1},_finishSave:function(e){var n={};t._traverse(this.attributes,function(e){e instanceof t.Object&&e.id&&e._hasData&&(n[e.id]=e)});var i=r.first(this._opSetQueue);this._opSetQueue=r.rest(this._opSetQueue),this._applyOpSet(i,this._serverData),this._mergeMagicFields(e);var s=this;t._objectEach(e,function(e,r){s._serverData[r]=t._decode(r,e);var i=t._traverse(s._serverData[r],function(e){if(e instanceof t.Object&&n[e.id])return n[e.id]});i&&(s._serverData[r]=i)}),this._rebuildAllEstimatedData(),this._saving=this._saving-1},_finishFetch:function(e,t){this._opSetQueue=[{}],this._mergeMagicFields(e),this._copyServerData(e),this._hasData=t},_applyOpSet:function(e,r){var n=this;t._objectEach(e,function(e,i){r[i]=e._estimate(r[i],n,i),r[i]===t.Op._UNSET&&delete r[i]})},_resetCacheForKey:function(e){var n=this.attributes[e];if(r.isObject(n)&&!(n instanceof t.Object)&&!(n instanceof t.File)){n=n.toJSON?n.toJSON():n;var i=JSON.stringify(n);if(this._hashedJSON[e]!==i){var s=!!this._hashedJSON[e];return this._hashedJSON[e]=i,s}}return!1},_rebuildEstimatedDataForKey:function(e){var r=this;delete this.attributes[e],this._serverData[e]&&(this.attributes[e]=this._serverData[e]),t._arrayEach(this._opSetQueue,function(n){var i=n[e];i&&(r.attributes[e]=i._estimate(r.attributes[e],r,e),r.attributes[e]===t.Op._UNSET?delete r.attributes[e]:r._resetCacheForKey(e))})},_rebuildAllEstimatedData:function(){var e=this,n=r.clone(this.attributes);this.attributes=r.clone(this._serverData),t._arrayEach(this._opSetQueue,function(r){e._applyOpSet(r,e.attributes),t._objectEach(r,function(t,r){e._resetCacheForKey(r)})}),t._objectEach(n,function(t,r){e.attributes[r]!==t&&e.trigger("change:"+r,e,e.attributes[r],{})}),t._objectEach(this.attributes,function(t,i){r.has(n,i)||e.trigger("change:"+i,e,t,{})})},set:function(e,n,i){var s;if(r.isObject(e)||t._isNullOrUndefined(e)?(s=e,t._objectEach(s,function(e,r){s[r]=t._decode(r,e)}),i=n):(s={},s[e]=t._decode(e,n)),i=i||{},!s)return this;s instanceof t.Object&&(s=s.attributes);var o=this;t._objectEach(s,function(e,t){if(o.constructor.readOnlyAttributes&&o.constructor.readOnlyAttributes[t])throw new Error("Cannot modify readonly key: "+t)}),i.unset&&t._objectEach(s,function(e,r){s[r]=new t.Op.Unset});var a=r.clone(s);if(t._objectEach(a,function(e,r){e instanceof t.Op&&(a[r]=e._estimate(o.attributes[r],o,r),a[r]===t.Op._UNSET&&delete a[r])}),!this._validate(s,i))return!1;this._mergeMagicFields(s),i.changes={};var u=this._escapedAttributes;return t._arrayEach(r.keys(s),function(e){var n=s[e];n instanceof t.Relation&&(n.parent=o),n instanceof t.Op||(n=new t.Op.Set(n));var a=!0;n instanceof t.Op.Set&&r.isEqual(o.attributes[e],n.value)&&(a=!1),a&&(delete u[e],i.silent?o._silent[e]=!0:i.changes[e]=!0);var c=r.last(o._opSetQueue);c[e]=n._mergeWithPrevious(c[e]),o._rebuildEstimatedDataForKey(e),a?(o.changed[e]=o.attributes[e],i.silent||(o._pending[e]=!0)):(delete o.changed[e],delete o._pending[e])}),i.silent||this.change(i),this},unset:function(e,t){return t=t||{},t.unset=!0,this.set(e,null,t)},increment:function(e,n){return(r.isUndefined(n)||r.isNull(n))&&(n=1),this.set(e,new t.Op.Increment(n))},add:function(e,r){return this.set(e,new t.Op.Add([r]))},addUnique:function(e,r){return this.set(e,new t.Op.AddUnique([r]))},remove:function(e,r){return this.set(e,new t.Op.Remove([r]))},op:function(e){return r.last(this._opSetQueue)[e]},clear:function(e){e=e||{},e.unset=!0;var t=r.extend(this.attributes,this._operations);return this.set(t,e)},_getSaveJSON:function(){var e=r.clone(r.first(this._opSetQueue));return t._objectEach(e,function(t,r){e[r]=t.toJSON()}),e},_canBeSerialized:function(){return t.Object._canBeSerializedAsValue(this.attributes)},fetch:function(e){var r=this;e=e||{};var n=t._request({method:"GET",route:"classes",className:this.className,objectId:this.id,useMasterKey:e.useMasterKey,sessionToken:e.sessionToken});return n.then(function(e,t,n){return r._finishFetch(r.parse(e,t,n),!0),r})._thenRunCallbacks(e,this)},save:function(e,n,i){var s,o,a;if(r.isObject(e)||t._isNullOrUndefined(e)?(s=e,a=n):(s={},s[e]=n,a=i),!a&&s){var u=r.reject(s,function(e,t){return r.include(["success","error","wait"],t)});if(0===u.length){var c=!0;if(r.has(s,"success")&&!r.isFunction(s.success)&&(c=!1),r.has(s,"error")&&!r.isFunction(s.error)&&(c=!1),c)return this.save(null,s)}}a=r.clone(a)||{},a.wait&&(o=r.clone(this.attributes));var l=r.clone(a)||{};l.wait&&(l.silent=!0);var h;if(l.error=function(e,t){h=t},s&&!this.set(s,l))return t.Promise.error(h)._thenRunCallbacks(a,this);var f=this;f._refreshCache();var _=[],d=[];return t.Object._findUnsavedChildren(f.attributes,_,d),_.length+d.length>0?t.Object._deepSaveAsync(this.attributes,{useMasterKey:a.useMasterKey,sessionToken:a.sessionToken}).then(function(){return f.save(null,a)},function(e){return t.Promise.error(e)._thenRunCallbacks(a,f)}):(this._startSave(),this._saving=(this._saving||0)+1,this._allPreviousSaves=this._allPreviousSaves||t.Promise.as(),this._allPreviousSaves=this._allPreviousSaves._continueWith(function(){var e=f.id?"PUT":"POST",n=f._getSaveJSON(),i="classes",u=f.className;"_User"!==f.className||f.id||(i="users",u=null);var c=t._request({route:i,className:u,objectId:f.id,method:e,useMasterKey:a.useMasterKey,sessionToken:a.sessionToken,data:n});return c=c.then(function(e,t,n){var i=f.parse(e,t,n);return a.wait&&(i=r.extend(s||{},i)),f._finishSave(i),a.wait&&f.set(o,l),f},function(e){return f._cancelSave(),t.Promise.error(e)})._thenRunCallbacks(a,f)}),this._allPreviousSaves)},destroy:function(e){e=e||{};var r=this,n=function(){r.trigger("destroy",r,r.collection,e)};if(!this.id)return n();e.wait||n();var i=t._request({route:"classes",className:this.className,objectId:this.id,method:"DELETE",useMasterKey:e.useMasterKey,sessionToken:e.sessionToken});return i.then(function(){return e.wait&&n(),r})._thenRunCallbacks(e,this)},parse:function(e,n,i){var s=r.clone(e);return r(["createdAt","updatedAt"]).each(function(e){s[e]&&(s[e]=t._parseDate(s[e]))}),s.updatedAt||(s.updatedAt=s.createdAt),n&&(this._existed=201!==n),s},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.id},change:function(e){e=e||{};var n=this._changing;this._changing=!0;var i=this;t._objectEach(this._silent,function(e){i._pending[e]=!0});var s=r.extend({},e.changes,this._silent);if(this._silent={},t._objectEach(s,function(t,r){i.trigger("change:"+r,i,i.get(r),e)}),n)return this;for(var o=function(e,t){i._pending[t]||i._silent[t]||delete i.changed[t]};!r.isEmpty(this._pending);)this._pending={},this.trigger("change",this,e),t._objectEach(this.changed,o),i._previousAttributes=r.clone(this.attributes);return this._changing=!1,this},existed:function(){return this._existed},hasChanged:function(e){return arguments.length?this.changed&&r.has(this.changed,e):!r.isEmpty(this.changed)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&r.clone(this.changed);var n={},i=this._previousAttributes;return t._objectEach(e,function(e,t){r.isEqual(i[t],e)||(n[t]=e)}),n},previous:function(e){return arguments.length&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return r.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},validate:function(e,n){if(r.has(e,"ACL")&&!(e.ACL instanceof t.ACL))return new t.Error(t.Error.OTHER_CAUSE,"ACL must be a Parse.ACL.");var i=!0;return t._objectEach(e,function(e,t){/^[A-Za-z][0-9A-Za-z_]*$/.test(t)||(i=!1)}),!i&&new t.Error(t.Error.INVALID_KEY_NAME)},_validate:function(e,t){if(t.silent||!this.validate)return!0;e=r.extend({},this.attributes,e);var n=this.validate(e,t);return!n||(t&&t.error?t.error(this,n,t):this.trigger("error",this,n,t),!1)},getACL:function(){return this.get("ACL")},setACL:function(e,t){return this.set("ACL",e,t)}}),t.Object._getSubclass=function(e){if(!r.isString(e))throw new Error("Parse.Object._getSubclass requires a string argument.");var n=t.Object._classMap[e];return n||(n=t.Object.extend(e),t.Object._classMap[e]=n),n},t.Object._create=function(e,r,n){var i=t.Object._getSubclass(e);return new i(r,n)},t.Object._toObjectIdArray=function(e,r){if(0===e.length)return t.Promise.as(e);for(var n,i=e[0].className,s=[],o=0;o<e.length;o++){var a=e[o];if(i!==a.className)return n=new t.Error(t.Error.INVALID_CLASS_NAME,"All objects should be of the same class"),t.Promise.error(n);if(!a.id)return n=new t.Error(t.Error.MISSING_OBJECT_ID,"All objects must have an ID"),t.Promise.error(n);r&&a._hasData||s.push(a.id)}return t.Promise.as(s)},t.Object._updateWithFetchedResults=function(e,r,n){var i={};t._arrayEach(r,function(e,t){i[e.id]=e});for(var s=0;s<e.length;s++){var o=e[s],a=i[o.id];if(!a&&n){var u=new t.Error(t.Error.OBJECT_NOT_FOUND,"All objects must exist on the server");return t.Promise.error(u)}o._mergeFromObject(a)}return t.Promise.as(e)},t.Object._fetchAll=function(e,r){if(0===e.length)return t.Promise.as(e);var n=!r;return t.Object._toObjectIdArray(e,n).then(function(r){var n=e[0].className,i=new t.Query(n);return i.containedIn("objectId",r),i.limit=r.length,i.find()}).then(function(n){return t.Object._updateWithFetchedResults(e,n,r)})},t.Object._classMap={},t.Object._extend=t._extend,t.Object.extend=function(e,n,i){if(!r.isString(e)){if(e&&r.has(e,"className"))return t.Object.extend(e.className,e,n);throw new Error("Parse.Object.extend's first argument should be the className.")}"User"===e&&t.User._performUserRewrite&&(e="_User"),n=n||{},n.className=e;var s=null;if(r.has(t.Object._classMap,e)){var o=t.Object._classMap[e];s=o._extend(n,i)}else s=this._extend(n,i);return s.extend=function(n){if(r.isString(n)||n&&r.has(n,"className"))return t.Object.extend.apply(s,arguments);var i=[e].concat(t._.toArray(arguments));return t.Object.extend.apply(s,i)},s.createWithoutData=function(e){var t=new s;return t.id=e,t},t.Object._classMap[e]=s,s},t.Object._findUnsavedChildren=function(e,r,n){t._traverse(e,function(e){return e instanceof t.Object?(e._refreshCache(),void(e.dirty()&&r.push(e))):e instanceof t.File?void(e.url()||n.push(e)):void 0})},t.Object._canBeSerializedAsValue=function(e){if(e instanceof t.Object)return!!e.id;if(e instanceof t.File)return!0;var n=!0;return r.isArray(e)?t._arrayEach(e,function(e){t.Object._canBeSerializedAsValue(e)||(n=!1)}):r.isObject(e)&&t._objectEach(e,function(e){t.Object._canBeSerializedAsValue(e)||(n=!1)}),n},t.Object._deepSaveAsync=function(e,n){var i=[],s=[];t.Object._findUnsavedChildren(e,i,s);var o=t.Promise.as();r.each(s,function(e){o=o.then(function(){return e.save(n)})});var a=r.uniq(i),u=r.uniq(a);return o.then(function(){return t.Promise._continueWhile(function(){return u.length>0},function(){var e=[],i=[];if(t._arrayEach(u,function(t){return e.length>20?void i.push(t):void(t._canBeSerialized()?e.push(t):i.push(t))}),u=i,0===e.length)return t.Promise.error(new t.Error(t.Error.OTHER_CAUSE,"Tried to save a batch with a cycle."));var s=t.Promise.when(r.map(e,function(e){return e._allPreviousSaves||t.Promise.as()})),o=new t.Promise;return t._arrayEach(e,function(e){e._allPreviousSaves=o}),s._continueWith(function(){return t._request({route:"batch",method:"POST",useMasterKey:n.useMasterKey,sessionToken:n.sessionToken,data:{requests:r.map(e,function(e){var t=e._getSaveJSON(),r="POST",n="/1/classes/"+e.className;return e.id&&(n=n+"/"+e.id,r="PUT"),e._startSave(),{method:r,path:n,body:t}})}}).then(function(r,n,i){var s;if(t._arrayEach(e,function(e,t){r[t].success?e._finishSave(e.parse(r[t].success,n,i)):(s=s||r[t].error,e._cancelSave())}),s)return t.Promise.error(new t.Error(s.code,s.error))}).then(function(e){return o.resolve(e),e},function(e){return o.reject(e),t.Promise.error(e)})})})}).then(function(){return e})}}(this),function(e){e.Parse=e.Parse||{};var t=e.Parse,r=t._;t.Role=t.Object.extend("_Role",{
constructor:function(e,n){r.isString(e)&&n instanceof t.ACL?(t.Object.prototype.constructor.call(this,null,null),this.setName(e),this.setACL(n)):t.Object.prototype.constructor.call(this,e,n)},getName:function(){return this.get("name")},setName:function(e,t){return this.set("name",e,t)},getUsers:function(){return this.relation("users")},getRoles:function(){return this.relation("roles")},validate:function(e,n){if("name"in e&&e.name!==this.getName()){var i=e.name;if(this.id&&this.id!==e.objectId)return new t.Error(t.Error.OTHER_CAUSE,"A role's name can only be set before it has been saved.");if(!r.isString(i))return new t.Error(t.Error.OTHER_CAUSE,"A role's name must be a String.");if(!/^[0-9a-zA-Z\-_ ]+$/.test(i))return new t.Error(t.Error.OTHER_CAUSE,"A role's name can only contain alphanumeric characters, _, -, and spaces.")}return!!t.Object.prototype.validate&&t.Object.prototype.validate.call(this,e,n)}})}(this),function(e){e.Parse=e.Parse||{};var t=e.Parse,r=t._;t.Collection=function(e,t){t=t||{},t.comparator&&(this.comparator=t.comparator),t.model&&(this.model=t.model),t.query&&(this.query=t.query),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,{silent:!0,parse:t.parse})},r.extend(t.Collection.prototype,t.Events,{model:t.Object,initialize:function(){},toJSON:function(){return this.map(function(e){return e.toJSON()})},add:function(e,n){var i,s,o,a,u,c,l={},h={};for(n=n||{},e=r.isArray(e)?e.slice():[e],i=0,o=e.length;i<o;i++){if(e[i]=this._prepareModel(e[i],n),a=e[i],!a)throw new Error("Can't add an invalid model to a collection");if(u=a.cid,l[u]||this._byCid[u])throw new Error("Duplicate cid: can't add the same model to a collection twice");if(c=a.id,!t._isNullOrUndefined(c)&&(h[c]||this._byId[c]))throw new Error("Duplicate id: can't add the same model to a collection twice");h[c]=a,l[u]=a}for(i=0;i<o;i++)(a=e[i]).on("all",this._onModelEvent,this),this._byCid[a.cid]=a,a.id&&(this._byId[a.id]=a);if(this.length+=o,s=t._isNullOrUndefined(n.at)?this.models.length:n.at,this.models.splice.apply(this.models,[s,0].concat(e)),this.comparator&&this.sort({silent:!0}),n.silent)return this;for(i=0,o=this.models.length;i<o;i++)a=this.models[i],l[a.cid]&&(n.index=i,a.trigger("add",a,this,n));return this},remove:function(e,t){var n,i,s,o;for(t=t||{},e=r.isArray(e)?e.slice():[e],n=0,i=e.length;n<i;n++)o=this.getByCid(e[n])||this.get(e[n]),o&&(delete this._byId[o.id],delete this._byCid[o.cid],s=this.indexOf(o),this.models.splice(s,1),this.length--,t.silent||(t.index=s,o.trigger("remove",o,this,t)),this._removeReference(o));return this},get:function(e){return e&&this._byId[e.id||e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},sort:function(e){if(e=e||{},!this.comparator)throw new Error("Cannot sort a set without a comparator");var t=r.bind(this.comparator,this);return 1===this.comparator.length?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("reset",this,e),this},pluck:function(e){return r.map(this.models,function(t){return t.get(e)})},reset:function(e,r){var n=this;return e=e||[],r=r||{},t._arrayEach(this.models,function(e){n._removeReference(e)}),this._reset(),this.add(e,{silent:!0,parse:r.parse}),r.silent||this.trigger("reset",this,r),this},fetch:function(e){e=r.clone(e)||{},void 0===e.parse&&(e.parse=!0);var n=this,i=this.query||new t.Query(this.model);return i.find({useMasterKey:e.useMasterKey,sessionToken:e.sessionToken}).then(function(t){return e.add?n.add(t,e):n.reset(t,e),n})._thenRunCallbacks(e,this)},create:function(e,t){var n=this;if(t=t?r.clone(t):{},e=this._prepareModel(e,t),!e)return!1;t.wait||n.add(e,t);var i=t.success;return t.success=function(r,s,o){t.wait&&n.add(r,t),i?i(r,s):r.trigger("sync",e,s,t)},e.save(null,t),e},parse:function(e,t){return e},chain:function(){return r(this.models).chain()},_reset:function(e){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,r){if(e instanceof t.Object)e.collection||(e.collection=this);else{var n=e,i=this.model;r.collection=this,e=new i(n,r),e._validate(e.attributes,r)||(e=!1)}return e},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,r,n){("add"!==e&&"remove"!==e||r===this)&&("destroy"===e&&this.remove(t,n),t&&"change:objectId"===e&&(delete this._byId[t.previous("objectId")],this._byId[t.id]=t),this.trigger.apply(this,arguments))}});var n=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];t._arrayEach(n,function(e){t.Collection.prototype[e]=function(){return r[e].apply(r,[this.models].concat(r.toArray(arguments)))}}),t.Collection.extend=t._extend}(this),function(e){e.Parse=e.Parse||{};var t=e.Parse,r=t._;t.View=function(e){this.cid=r.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()};var n=/^(\S+)\s*(.*)$/,i=["model","collection","el","id","attributes","className","tagName"];r.extend(t.View.prototype,t.Events,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(e,r,n){var i=document.createElement(e);return r&&t.$(i).attr(r),n&&t.$(i).html(n),i},setElement:function(e,r){return this.$el=t.$(e),this.el=this.$el[0],r!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(e=e||t._getValue(this,"events")){this.undelegateEvents();var i=this;t._objectEach(e,function(t,s){if(r.isFunction(t)||(t=i[e[s]]),!t)throw new Error('Event "'+e[s]+'" does not exist');var o=s.match(n),a=o[1],u=o[2];t=r.bind(t,i),a+=".delegateEvents"+i.cid,""===u?i.$el.bind(a,t):i.$el.delegate(u,a,t)})}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=r.extend({},this.options,e));var t=this;r.each(i,function(r){e[r]&&(t[r]=e[r])}),this.options=e},_ensureElement:function(){if(this.el)this.setElement(this.el,!1);else{var e=t._getValue(this,"attributes")||{};this.id&&(e.id=this.id),this.className&&(e["class"]=this.className),this.setElement(this.make(this.tagName,e),!1)}}}),t.View.extend=t._extend}(this),function(e){e.Parse=e.Parse||{};var t=e.Parse,r=t._;t.User=t.Object.extend("_User",{_isCurrentUser:!1,_mergeFromObject:function(e){e.getSessionToken()&&(this._sessionToken=e.getSessionToken()),t.User.__super__._mergeFromObject.call(this,e)},_mergeMagicFields:function(e){e.sessionToken&&(this._sessionToken=e.sessionToken,delete e.sessionToken),t.User.__super__._mergeMagicFields.call(this,e)},_cleanupAuthData:function(){if(this.isCurrent()){var e=this.get("authData");e&&t._objectEach(this.get("authData"),function(t,r){e[r]||delete e[r]})}},_synchronizeAllAuthData:function(){var e=this.get("authData");if(e){var r=this;t._objectEach(this.get("authData"),function(e,t){r._synchronizeAuthData(t)})}},_synchronizeAuthData:function(e){if(this.isCurrent()){var n;r.isString(e)?(n=e,e=t.User._authProviders[n]):n=e.getAuthType();var i=this.get("authData");if(i&&e){var s=e.restoreAuthentication(i[n]);s||this._unlinkFrom(e)}}},_handleSaveResult:function(e){e&&(this._isCurrentUser=!0),this._cleanupAuthData(),this._synchronizeAllAuthData(),delete this._serverData.password,this._rebuildEstimatedDataForKey("password"),this._refreshCache(),(e||this.isCurrent())&&t.User._saveCurrentUser(this)},_linkWith:function(e,n){var i;if(r.isString(e)?(i=e,e=t.User._authProviders[e]):i=e.getAuthType(),r.has(n,"authData")){var s=this.get("authData")||{};s[i]=n.authData,this.set("authData",s);var o=r.clone(n)||{};return o.success=function(e){e._handleSaveResult(!0),n.success&&n.success.apply(this,arguments)},this.save({authData:s},o)}var a=this,u=new t.Promise;return e.authenticate({success:function(e,t){a._linkWith(e,{authData:t,success:n.success,error:n.error}).then(function(){u.resolve(a)})},error:function(e,t){n.error&&n.error(a,t),u.reject(t)}}),u},_unlinkFrom:function(e,n){r.isString(e)&&(e=t.User._authProviders[e]);var i=r.clone(n),s=this;return i.authData=null,i.success=function(t){s._synchronizeAuthData(e),n.success&&n.success.apply(this,arguments)},this._linkWith(e,i)},_isLinked:function(e){var t;t=r.isString(e)?e:e.getAuthType();var n=this.get("authData")||{};return!!n[t]},_logOutWithAll:function(){var e=this.get("authData");if(e){var r=this;t._objectEach(this.get("authData"),function(e,t){r._logOutWith(t)})}},_logOutWith:function(e){this.isCurrent()&&(r.isString(e)&&(e=t.User._authProviders[e]),e&&e.deauthenticate&&e.deauthenticate())},signUp:function(e,n){var i;n=n||{};var s=e&&e.username||this.get("username");if(!s||""===s)return i=new t.Error(t.Error.OTHER_CAUSE,"Cannot sign up user with an empty name."),n&&n.error&&n.error(this,i),t.Promise.error(i);var o=e&&e.password||this.get("password");if(!o||""===o)return i=new t.Error(t.Error.OTHER_CAUSE,"Cannot sign up user with an empty password."),n&&n.error&&n.error(this,i),t.Promise.error(i);var a=r.clone(n);return a.success=function(e){e._handleSaveResult(t.User._canUseCurrentUser()),n.success&&n.success.apply(this,arguments)},this.save(e,a)},logIn:function(e){if(!t.User._canUseCurrentUser())throw new Error("It is not possible to log in on a server environment.");var r=this;e=e||{};var n=t._request({route:"login",method:"GET",useMasterKey:e.useMasterKey,data:this.toJSON()});return n.then(function(e,t,n){var i=r.parse(e,t,n);return r._finishFetch(i),r._handleSaveResult(!0),r})._thenRunCallbacks(e,this)},save:function(e,n,i){var s,o;r.isObject(e)||r.isNull(e)||r.isUndefined(e)?(s=e,o=n):(s={},s[e]=n,o=i),o=o||{};var a=r.clone(o);return a.success=function(e){e._handleSaveResult(!1),o.success&&o.success.apply(this,arguments)},t.Object.prototype.save.call(this,s,a)},fetch:function(e){var n=e?r.clone(e):{};return n.success=function(t){t._handleSaveResult(!1),e&&e.success&&e.success.apply(this,arguments)},t.Object.prototype.fetch.call(this,n)},isCurrent:function(){return this._isCurrentUser},getUsername:function(){return this.get("username")},setUsername:function(e,t){return this.set("username",e,t)},setPassword:function(e,t){return this.set("password",e,t)},getEmail:function(){return this.get("email")},setEmail:function(e,t){return this.set("email",e,t)},authenticated:function(){return!!this._sessionToken&&t.User.current()&&t.User.current().id===this.id},getSessionToken:function(){return this._sessionToken},_upgradeToRevocableSession:function(e){if(e=e||{},!t.User.current())return t.Promise.as()._thenRunCallbacks(e);var r=t.User.current().getSessionToken();return t.Session._isRevocable(r)?t.Promise.as()._thenRunCallbacks(e):t._request({route:"upgradeToRevocableSession",method:"POST",useMasterKey:e.useMasterKey,sessionToken:r}).then(function(e){var r=new t.Session;r._finishFetch(e);var n=t.User.current();n._sessionToken=r.getSessionToken(),t.User._saveCurrentUser(n)})._thenRunCallbacks(e)}},{_currentUser:null,_currentUserMatchesDisk:!1,_CURRENT_USER_KEY:"currentUser",_authProviders:{},_performUserRewrite:!0,_isRevocableSessionEnabled:!1,_enableUnsafeCurrentUser:!1,signUp:function(e,r,n,i){n=n||{},n.username=e,n.password=r;var s=t.Object._create("_User");return s.signUp(n,i)},logIn:function(e,r,n){var i=t.Object._create("_User");return i._finishFetch({username:e,password:r}),i.logIn(n)},become:function(e,r){if(!t.User._canUseCurrentUser())throw new Error("It is not secure to become a user on a node.js server environment.");r=r||{};var n=t.Object._create("_User");return t._request({route:"users",className:"me",method:"GET",useMasterKey:r.useMasterKey,sessionToken:e}).then(function(e,t,r){var i=n.parse(e,t,r);return n._finishFetch(i),n._handleSaveResult(!0),n})._thenRunCallbacks(r,n)},logOut:function(){if(!t.User._canUseCurrentUser())throw new Error("There is no current user user on a node.js server environment.");return t.User._currentAsync().then(function(e){var r=t.Storage.removeItemAsync(t._getParsePath(t.User._CURRENT_USER_KEY));if(null!==e){var n=e.getSessionToken();t.Session._isRevocable(n)&&r.then(function(){return t._request({route:"logout",method:"POST",sessionToken:n})}),e._logOutWithAll(),e._isCurrentUser=!1}return t.User._currentUserMatchesDisk=!0,t.User._currentUser=null,r})},requestPasswordReset:function(e,r){r=r||{};var n=t._request({route:"requestPasswordReset",method:"POST",useMasterKey:r.useMasterKey,data:{email:e}});return n._thenRunCallbacks(r)},current:function(){if(!t.User._canUseCurrentUser())throw new Error("There is no current user user on a node.js server environment.");if(t.Storage.async)return t.User._currentAsync(),t.User._currentUser;if(t.User._currentUser)return t.User._currentUser;if(t.User._currentUserMatchesDisk)return t.User._currentUser;t.User._currentUserMatchesDisk=!0;var e=t.Storage.getItem(t._getParsePath(t.User._CURRENT_USER_KEY));if(!e)return null;t.User._currentUser=t.Object._create("_User"),t.User._currentUser._isCurrentUser=!0;var r=JSON.parse(e);return t.User._currentUser.id=r._id,delete r._id,t.User._currentUser._sessionToken=r._sessionToken,delete r._sessionToken,t.User._currentUser._finishFetch(r),t.User._currentUser._synchronizeAllAuthData(),t.User._currentUser._refreshCache(),t.User._currentUser._opSetQueue=[{}],t.User._currentUser},_currentAsync:function(){return t.User._currentUser?t.Promise.as(t.User._currentUser):t.User._currentUserMatchesDisk?t.Promise.as(t.User._currentUser):t.Storage.getItemAsync(t._getParsePath(t.User._CURRENT_USER_KEY)).then(function(e){if(!e)return null;t.User._currentUser=t.Object._create("_User"),t.User._currentUser._isCurrentUser=!0;var r=JSON.parse(e);return t.User._currentUser.id=r._id,delete r._id,t.User._currentUser._sessionToken=r._sessionToken,delete r._sessionToken,t.User._currentUser._finishFetch(r),t.User._currentUser._synchronizeAllAuthData(),t.User._currentUser._refreshCache(),t.User._currentUser._opSetQueue=[{}],t.User._currentUser})},allowCustomUserClass:function(e){this._performUserRewrite=!e},enableRevocableSession:function(e){return e=e||{},t.User._isRevocableSessionEnabled=!0,t.User._canUseCurrentUser()&&t.User.current()?t.User.current()._upgradeToRevocableSession(e):t.Promise.as()._thenRunCallbacks(e)},enableUnsafeCurrentUser:function(){t.User._enableUnsafeCurrentUser=!0},_canUseCurrentUser:function(){return!t._isNode||t.User._enableUnsafeCurrentUser},_saveCurrentUser:function(e){null!==t.User._currentUser&&t.User._currentUser!==e&&t.User.logOut(),e._isCurrentUser=!0,t.User._currentUser=e,t.User._currentUserMatchesDisk=!0;var r=e.toJSON();r._id=e.id,r._sessionToken=e._sessionToken,t.Storage.async?t.Storage.setItemAsync(t._getParsePath(t.User._CURRENT_USER_KEY),JSON.stringify(r)):t.Storage.setItem(t._getParsePath(t.User._CURRENT_USER_KEY),JSON.stringify(r))},_registerAuthenticationProvider:function(e){t.User._authProviders[e.getAuthType()]=e,t.User.current()&&t.User.current()._synchronizeAuthData(e.getAuthType())},_logInWith:function(e,r){var n=t.Object._create("_User");return n._linkWith(e,r)}})}(this),function(e){e.Parse=e.Parse||{};var t=e.Parse;t.Session=t.Object.extend("_Session",{getSessionToken:function(){return this._sessionToken},_mergeMagicFields:function(e){e.sessionToken&&(this._sessionToken=e.sessionToken,delete e.sessionToken),t.Session.__super__._mergeMagicFields.call(this,e)}},{readOnlyAttributes:{createdWith:!0,expiresAt:!0,installationId:!0,restricted:!0,sessionToken:!0,user:!0},current:function(e){e=e||{};var r=t.Object._create("_Session"),n=t.User.current().getSessionToken();return t._request({route:"sessions",className:"me",method:"GET",useMasterKey:e.useMasterKey,sessionToken:n}).then(function(e,t,n){var i=r.parse(e,t,n);return r._finishFetch(i),r})._thenRunCallbacks(e,r)},_isRevocable:function(e){return e.indexOf("r:")>-1},isCurrentSessionRevocable:function(){if(null!==t.User.current())return t.Session._isRevocable(t.User.current().getSessionToken())}})}(this);
//# sourceMappingURL=parsebone.min.js.map
